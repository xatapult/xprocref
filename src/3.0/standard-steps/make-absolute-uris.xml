<?xml version="1.0" encoding="UTF-8"?>
<step name="make-absolute-uris"
      version-idref="v30"
      category-idrefs="standard-steps"
      short-description="[EDIT] make-absolute-uris short description"
      required="true"
      publish="false"
      href-specification="{$BASELINK-STANDARD-STEPS-V30}#c.make-absolute-uris"
      xsi:schemaLocation="http://www.xtpxlib.nl/ns/xprocref ../../../xsd/xprocref.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="http://www.xtpxlib.nl/ns/xprocref">
   <signature>
      <input port="source"
             content-types="xml html"
             primary="true"
             sequence="true">
         <description>
            <para>[EDIT] input source</para>
         </description>
      </input>
      <output port="result"
              content-types="xml html"
              primary="true"
              sequence="true">
         <description>
            <para>[EDIT] output result</para>
         </description>
      </output>
      <option name="match"
              required="true"
              as="xs:string"
              subtype="XSLTSelectionPattern">
         <description>
            <para>[EDIT] option match</para>
         </description>
      </option>
      <option name="base-uri"
              as="xs:anyURI?"
              required="false">
         <description>
            <para>[EDIT] option base-uri</para>
         </description>
      </option>
   </signature>
   <summary>
      <para>[EDIT]</para>
      <para>The <code>p:make-absolute-uris</code> step makes an element or attribute's value in the source document an absolute IRI value in the result document.</para>
   </summary>
   <description>
      <para>[EDIT]</para>
      <para>The value of the <option>match</option> option must be an XSLTSelectionPattern. <emphasis role="bold">[ERROR <step-error-ref code="XC0023"/>]</emphasis>
      </para>
      <para>The value of the <option>base-uri</option> option must be an <type>anyURI</type>. It is interpreted as an IRI reference. If it is relative, it is made absolute against the base URI of the element on which it is specified (<tag>p:with-option</tag> or <tag>p:make-absolute-uris</tag> in the case of a syntactic shortcut value). <emphasis role="bold">[ERROR <step-error-ref code="XD0064"/>]</emphasis>
      </para>
      <para>For every element or attribute in the input document which matches the specified pattern, its XPath string-value is resolved against the specified base URI and the resulting absolute IRI is used as the matched node's entire contents in the output.</para>
      <para>The base URI used for resolution defaults to the matched attribute's element or the matched element's base URI unless the <option>base-uri</option> option is specified. When the <option>base-uri</option> option is specified, the option value is used as the base URI regardless of any contextual base URI value in the document. This option value is resolved against the base URI of the <tag>p:option</tag> element used to set the option.</para>
      <para>If the IRI reference specified by the <option>base-uri</option> option on <tag>p:make-absolute-uris</tag> is absent and the input document has no base URI, the results are implementation-dependent. </para>
      <bridgehead>Document properties</bridgehead>
      <para feature="make-absolute-uris-preserves-all">All document properties are preserved.</para>
   </description>
   <step-errors>
      <step-error code="XC0023">
         <description>
            <para>It is a dynamic error if the pattern matches anything other than element or attribute nodes.</para>
         </description>
      </step-error>
      <step-error code="XD0064">
         <description>
            <para>It is a dynamic error if the base URI is not both absolute and valid according to <link xlink:href="https://www.rfc-editor.org/info/rfc3986"
                     role="newpage"
                     xmlns:xlink="http://www.w3.org/1999/xlink">RFCÂ 3986</link> .</para>
         </description>
      </step-error>
   </step-errors>
</step>