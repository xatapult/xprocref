<?xml version="1.0" encoding="UTF-8"?>
<step name="replace" version-idref="v30" category-idrefs="standard-steps" short-description="Replace nodes with a document" required="true"
  publish="false" href-specification="{$BASELINK-STANDARD-STEPS-V30}#c.replace"
  xsi:schemaLocation="http://www.xtpxlib.nl/ns/xprocref ../../../xsd/xprocref.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns="http://www.xtpxlib.nl/ns/xprocref">

  <!-- ======================================================================= -->

  <signature>
    <input port="source" primary="true" content-types="xml html" sequence="false">

      <description>
        <para>The document in which to replace nodes.</para>
      </description>
    </input>

    <input port="replacement" content-types="text xml html" primary="false" sequence="false">
      <description>
        <para>The document to replace the nodes with.</para>
      </description>
    </input>

    <output port="result" content-types="text xml html" primary="true" sequence="false">
      <description>
        <para>The resulting document.</para>
      </description>
    </output>

    <option name="match" required="true" as="xs:string" subtype="XSLTSelectionPattern">
      <description>
        <para>The XSLT match pattern for the nodes to replace, as a string.</para>
      </description>
    </option>

  </signature>

  <!-- ======================================================================= -->

  <summary>
    <para>The <step/> step takes the document appearing on its <port>source</port> port and replaces matching nodes with the document appearing on the
        <code>replacement</code> port.</para>
  </summary>

  <!-- ======================================================================= -->

  <description>

    <para>The <step/> step takes the XSLT match pattern in the <option>match</option> option and holds this against the document appearing on its
        <port>source</port> port. Any matching nodes are replaced by the document on the <port>replacement</port> port.</para>

  </description>

  <!-- ======================================================================= -->

  <detail>
    <para>For obvious reasons, you cannot replace attributes and namespace nodes.</para>
  </detail>

  <detail>
    <xi:include href="../../text-fragments/document-properties-preserved.xml"/>
  </detail>

  <!-- ======================================================================= -->

  <step-errors>
    <step-error code="XC0023"/>
  </step-errors>
  
</step>
