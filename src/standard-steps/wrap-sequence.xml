<?xml version="1.0" encoding="UTF-8"?>
<step name="wrap-sequence"
      version-idref="v30"
      category-idrefs="standard-steps"
      short-description="[EDIT] wrap-sequence short description"
      required="true"
      publish="false"
      href-specification="{$BASELINK-STANDARD-STEPS}#c.wrap-sequence"
      xsi:schemaLocation="http://www.xtpxlib.nl/ns/xprocref ../../xsd/xprocref.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="http://www.xtpxlib.nl/ns/xprocref">
   <signature>
      <input port="source"
             content-types="text xml html"
             sequence="true"
             primary="true">
         <description>
            <para>[EDIT] input source</para>
         </description>
      </input>
      <output port="result"
              sequence="true"
              content-types="application/xml"
              primary="true">
         <description>
            <para>[EDIT] output result</para>
         </description>
      </output>
      <option name="wrapper"
              required="true"
              as="xs:QName">
         <description>
            <para>[EDIT] option wrapper</para>
         </description>
      </option>
      <option name="group-adjacent"
              as="xs:string?"
              subtype="XPathExpression"
              required="false">
         <description>
            <para>[EDIT] option group-adjacent</para>
         </description>
      </option>
   </signature>
   <summary>
      <para>[EDIT]</para>
      <para>The <tag>p:wrap-sequence</tag> step accepts a sequence of documents and produces either a single document or a new sequence of documents.</para>
   </summary>
   <description>
      <para>[EDIT]</para>
      <para>The value of the <option>group-adjacent</option> option must be an XPathExpression.</para>
      <para>In its simplest form, <tag>p:wrap-sequence</tag> takes a sequence of documents and produces a single, new document by placing each document in the <port>source</port> sequence inside a new document element as sequential siblings. The name of the document element is the value specified in the <option>wrapper</option> option.</para>
      <para>The <option>group-adjacent</option> option can be used to group adjacent documents. The XPath context for the <option>group-adjacent</option> option changes over time. For each document that appears on the <code>source</code> port, the expression is evaluated with that document as the context document. The context position (<code>position()</code>) is the position of that document within the sequence and the context size (<code>last()</code>) is the total number of documents in the sequence. Whenever two or more sequentially adjacent documents have the same “group adjacent” value, they are wrapped together in a single wrapper element. Two “group adjacent” values are the same if the standard XPath function <code>deep-equal()</code> returns true for them.</para>
      <bridgehead>Document properties</bridgehead>
      <para feature="wrap-sequence-preserves-none">No document properties are preserved. The document produced has no <property>base-uri</property> property. </para>
   </description>
</step>