<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="xproc xprocref xml step p:xinclude xinclude"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:xinclude (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.0/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><div class="sect1" id="sect1-d535e63147"><a name="sect1-d535e63147"><!----></a><h1 class="sect1"><a href="p.www-form-urlencode.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:xinclude (3.1)&nbsp;<a href="p.xquery.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Apply XInclude procesing to a document.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d535e63160"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d535e63328"><span class="link">Description</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d535e63407"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#p_xinclude-v31-basic"><span class="link">Basic usage</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_xinclude-v31-base-uri-fixup"><span class="link">Base URI fixup</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_xinclude-v31-language-fixup"><span class="link">Language fixup</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d535e63505"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d535e63519"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d535e63543"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d535e63160"><a name="sect2-d535e63160"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:xinclude"&gt;
  &lt;input port="source" primary="true" content-types="xml html" sequence="true"/&gt;
  &lt;output port="result" primary="true" content-types="xml html" sequence="true"/&gt;
  &lt;option name="fixup-xml-base" as="xs:boolean" required="false" select="false()"/&gt;
  &lt;option name="fixup-xml-lang" as="xs:boolean" required="false" select="false()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:xinclude</code> step applies <a href="https://www.w3.org/TR/xinclude/" target="_blank"><span class="link newpage">XInclude</span></a> processing to the document
      appearing on the <code class="code port">source</code> document.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Type</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">source</code></p></td><td><p class="para"><code class="code">input</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">xml html</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">The document to apply the XInclude processing to.</p></td></tr><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">xml html</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">The resulting document.</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">fixup-xml-base</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">Perform <a href="https://www.w3.org/TR/xinclude/#base" target="_blank"><span class="link newpage">base URI fixup</span></a> to the resulting document.
          Basically this means that <code class="code">xml:base</code> elements are added to the root elements of the included files, containing the URIs they were
          included from. See also the <a href="#p_xinclude-v31-base-uri-fixup"><span class="link">Base URI fixup</span></a> example.</p></td></tr><tr><td><p class="para"><code class="code">fixup-xml-lang</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">Perform <a href="https://www.w3.org/TR/xinclude/#language" target="_blank"><span class="link newpage">language fixup</span></a> on the resulting document.
          Basically this means that an <code class="code">xml:lang</code> attribute is added to the root elements of the included documents. This stops the
          language settings of the including document from being inherited by the included document. See also the <a href="#p_xinclude-v31-language-fixup"><span class="link">Language fixup</span></a> example.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d535e63328"><a name="sect2-d535e63328"><!----></a><h2 class="sect2">Description</h2><p class="para">The <a href="https://www.w3.org/TR/xinclude/" target="_blank"><span class="link newpage">XInclude</span></a> standard defines a syntax for specifying document
      inclusions. Basically this means:</p><ul class="itemizedlist"><li><p class="para">In your source document you write (zero, one or multiple times): <code class="tag">&lt;xi:include href="…"/&gt;</code> (the <code class="code">xi</code>
          namespace prefix must be bound to the namespace <code class="code">http://www.w3.org/2001/XInclude</code>).</p></li><li><p class="para">You run your document through the <code class="code step">p:xinclude</code> step.</p></li><li><p class="para">All <code class="tag">&lt;xi:include&gt;</code> elements are replaced with the contents of the document their <code class="code">href</code> attribute is pointing to.
        </p></li><li><p class="para">All <code class="tag">&lt;xi:include&gt;</code> elements in the included documents are processed also, recursively.</p></li></ul><p class="para">Additionally, the <a href="https://www.w3.org/TR/xinclude/" target="_blank"><span class="link newpage">XInclude</span></a> standard defines some <a href="https://www.w3.org/TR/xinclude/#include_element" target="_blank"><span class="link newpage">additional attributes</span></a> for the <code class="tag">&lt;xi:include&gt;</code>
      element. The most used one is probably the <code class="code">parse</code> attribute: <code class="code">parse="xml"</code> (the default) means the document must be a
      well-formed XML document and is included as an XML fragment; <code class="code">parse="text"</code> means the document is included as plain text. There is
      also an <a href="https://www.w3.org/TR/xinclude/#fallback_element" target="_blank"><span class="link newpage"><code class="tag">&lt;xi:fallback&gt;</code></span></a> child element that
      defines what will happen if the included document could not be found.</p></div><div class="sect2" id="sect2-d535e63407"><a name="sect2-d535e63407"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="p_xinclude-v31-basic"><a name="p_xinclude-v31-basic"><!----></a><h3 class="sect3">Basic usage</h3><p class="para">Remark upfront: some of the example documents contain <code class="code">xml:lang</code> attributes. These are intended for the <a href="#p_xinclude-v31-language-fixup"><span class="link">Language fixup</span></a> example below.</p><p class="para">Assume we have a master document called <code class="code">document-0.xml</code> that XIncludes two other documents:</p><div class="programlisting"><pre class="programlisting">&lt;document-0 xmlns:xi="http://www.w3.org/2001/XInclude" xml:lang="en-us"&gt;
  &lt;description&gt;This is the master document&lt;/description&gt;
  &lt;xi:include href="includes/document-1.xml"/&gt;
  &lt;xi:include href="includes/document-2.xml"/&gt;
&lt;/document-0&gt;</pre></div><p class="para">The first include document <code class="code">includes/document-1.xml</code> looks like this, please notice that it contains an <code class="tag">&lt;xi:include&gt;</code>
      element itself:</p><div class="programlisting"><pre class="programlisting">&lt;document-1 xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
  &lt;description&gt;This is include document 1&lt;/description&gt;
  &lt;xi:include href="document-2.xml"/&gt;
&lt;/document-1&gt;</pre></div><p class="para">The second include document <code class="code">includes/document-2.xml</code> (that is also included by <code class="code">includes/document-1.xml</code>) looks like
      this:</p><div class="programlisting"><pre class="programlisting">&lt;document-1 xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
  &lt;description&gt;This is include document 1&lt;/description&gt;
  &lt;xi:include href="document-2.xml"/&gt;
&lt;/document-1&gt;</pre></div><p class="para">Now if we run <code class="code">document-0.xml</code> through the <code class="code step">p:xinclude</code> step, the result is as follows:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source" href="document-0.xml"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:xinclude/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;document-0 xml:lang="en-us"&gt;
   &lt;description&gt;This is the master document&lt;/description&gt;
   &lt;document-1&gt;
      &lt;description&gt;This is include document 1&lt;/description&gt;
      &lt;document-2 xml:lang="en-gb"&gt;
         &lt;description&gt;This is include document 2&lt;/description&gt;
      &lt;/document-2&gt;
   &lt;/document-1&gt;
   &lt;document-2 xml:lang="en-gb"&gt;
      &lt;description&gt;This is include document 2&lt;/description&gt;
   &lt;/document-2&gt;
&lt;/document-0&gt;</pre></div></div><div class="sect3" id="p_xinclude-v31-base-uri-fixup"><a name="p_xinclude-v31-base-uri-fixup"><!----></a><h3 class="sect3">Base URI fixup</h3><p class="para">The XInclude base URI fixup means that an <code class="code">xml:base</code> attribute is added to the root elements of the included documents. Using the
      same documents and include structure as the <a href="#p_xinclude-v31-basic"><span class="link">Basic usage</span></a> example, it looks like this:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source" href="document-0.xml"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:xinclude fixup-xml-base="true"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;document-0 xml:lang="en-us"&gt;
   &lt;description&gt;This is the master document&lt;/description&gt;
   &lt;document-1 xml:base="file:/…/…/includes/document-1.xml"&gt;
      &lt;description&gt;This is include document 1&lt;/description&gt;
      &lt;document-2 xml:lang="en-gb" xml:base="file:/…/…/includes/document-2.xml"&gt;
         &lt;description&gt;This is include document 2&lt;/description&gt;
      &lt;/document-2&gt;
   &lt;/document-1&gt;
   &lt;document-2 xml:lang="en-gb" xml:base="file:/…/…/includes/document-2.xml"&gt;
      &lt;description&gt;This is include document 2&lt;/description&gt;
   &lt;/document-2&gt;
&lt;/document-0&gt;</pre></div><p class="para">Notice that there is no <code class="code">xml:base</code> attribute added to the root element of the master document. If you need
        <span class="emphasis italic">all</span> document root elements having an <code class="code">xml:base</code> attribute, use the <code class="code step"><a href="p.add-xml-base.html"><span class="link">p:add-xml-base</span></a></code> step
      instead of XInclude base URI fixup:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source" href="document-0.xml"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:xinclude/&gt;
  &lt;p:add-xml-base relative="false"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;document-0 xml:lang="en-us" xml:base="file:/…/…/document-0.xml"&gt;
   &lt;description&gt;This is the master document&lt;/description&gt;
   &lt;document-1 xml:base="file:/…/…/includes/document-1.xml"&gt;
      &lt;description&gt;This is include document 1&lt;/description&gt;
      &lt;document-2 xml:lang="en-gb" xml:base="file:/…/…/includes/document-2.xml"&gt;
         &lt;description&gt;This is include document 2&lt;/description&gt;
      &lt;/document-2&gt;
   &lt;/document-1&gt;
   &lt;document-2 xml:lang="en-gb" xml:base="file:/…/…/includes/document-2.xml"&gt;
      &lt;description&gt;This is include document 2&lt;/description&gt;
   &lt;/document-2&gt;
&lt;/document-0&gt;</pre></div></div><div class="sect3" id="p_xinclude-v31-language-fixup"><a name="p_xinclude-v31-language-fixup"><!----></a><h3 class="sect3">Language fixup</h3><p class="para">The XInclude language fixup means that an <code class="code">xml:lang</code> attribute is added to the root elements of the included documents. This
      stops the language settings of the including document from being inherited by the included documents. Using the same documents and include
      structure as the <a href="#p_xinclude-v31-basic"><span class="link">Basic usage</span></a> example, it looks like this:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source" href="document-0.xml"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:xinclude fixup-xml-lang="true"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;document-0 xml:lang="en-us"&gt;
   &lt;description&gt;This is the master document&lt;/description&gt;
   &lt;document-1 xml:lang=""&gt;
      &lt;description&gt;This is include document 1&lt;/description&gt;
      &lt;document-2 xml:lang="en-gb"&gt;
         &lt;description&gt;This is include document 2&lt;/description&gt;
      &lt;/document-2&gt;
   &lt;/document-1&gt;
   &lt;document-2 xml:lang="en-gb"&gt;
      &lt;description&gt;This is include document 2&lt;/description&gt;
   &lt;/document-2&gt;
&lt;/document-0&gt;</pre></div><p class="para">Notice the empty <code class="code">xml:base=""</code> attribute on the <code class="tag">&lt;document-1&gt;</code> element. That wasn’t there in the source. It stops
      the language settings of the including document <code class="code">document-0.xml</code> (<code class="code">xml:lang="en-us"</code>) from automatically being inherited
      by the included document <code class="code">includes/document-1.xml</code>.</p></div></div><div class="sect2" id="sect2-d535e63505"><a name="sect2-d535e63505"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para"><code class="code step">p:xinclude</code> preserves all document-properties of the document(s) appearing on its <code class="code port">source</code> port.</p></li></ul></div><div class="sect2" id="sect2-d535e63519"><a name="sect2-d535e63519"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0029"><a name="error-XC0029"><!----></a><a href="../error-codes.html#error-XC0029"><span class="link"><code class="code">XC0029</code></span></a></p></td><td><p class="para">It is a dynamic error if an XInclude error occurs during processing.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d535e63543"><a name="sect2-d535e63543"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:xinclude</code> step is for XProc version: <a href="index.html"><span class="link">3.1</span></a>. This is a required step (an XProc 3.1 processor must support this).</p><p class="para">The formal specification for the <code class="code step">p:xinclude</code> step can be found <a href="https://spec.xproc.org/lastcall-2024-08/head/steps/#c.xinclude" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:xinclude</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="Standard_XProc_steps.html"><span class="link">Standard XProc steps</span></a></p></li><li><p class="para"><a href="Additional_standards.html"><span class="link">Additional standards</span></a></p></li></ul><p class="para">The <code class="code step">p:xinclude</code> step is also present in version:
                <a href="../3.0/p.xinclude.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>