<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="xproc xprocref xml step p:hash hash"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:hash (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.1/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><div class="sect1" id="sect1-d642e15421"><a name="sect1-d642e15421"><!----></a><h1 class="sect1"><a href="p.filter.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:hash (3.1)&nbsp;<a href="p.http-request.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Computes a hash code for a value.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d642e15434"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d642e15662"><span class="link">Description</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d642e15816"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#sect3-d642e15819"><span class="link">Basic usage</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_hash-v31-hash-as-text"><span class="link">Hash code as text</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d642e15856"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d642e15902"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d642e15926"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d642e15434"><a name="sect2-d642e15434"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:hash"&gt;
  &lt;input port="source" primary="true" content-types="xml html" sequence="false"/&gt;
  &lt;output port="result" primary="true" content-types="text xml html" sequence="false"/&gt;
  &lt;option name="algorithm" as="xs:QName" required="true"/&gt;
  &lt;option name="value" as="xs:string" required="true"/&gt;
  &lt;option name="match" as="xs:string" required="false" select="'/*/node()'"/&gt;
  &lt;option name="parameters" as="map(xs:QName,item()*)?" required="false" select="()"/&gt;
  &lt;option name="version" as="xs:string?" required="false" select="()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:hash</code> step generates a hash code for some value and injects this into the document appearing on the <code class="code port">source</code> port.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Type</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">source</code></p></td><td><p class="para"><code class="code">input</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">xml html</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">The source document to record the computed hash code <span class="emphasis italic">in</span>.</p></td></tr><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">text xml html</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">Result document, derived from the source document, intended to contain the hash code. See the <code class="code option">match</code> option and the
          description below.</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">algorithm</code></p></td><td><p class="para"><code class="code">xs:QName</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The hash computation algorithm to use. See the description below.</p></td></tr><tr><td><p class="para"><code class="code">value</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The string value to calculate the hash code from.</p></td></tr><tr><td><p class="para"><code class="code">match</code></p></td><td><p class="para"><code class="code">xs:string</code> (XSLT selection pattern)</p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">/*/node()</code></p></td><td><p class="para">An XSLT selection pattern that tells <code class="code step">p:hash</code> where to insert the hash code in the source document. All node(s) matched are replaced with
          the computed hash code (the nodes themselves, not just their contents).</p><p class="para">If this option matches an attribute, the value of the attribute is changed.</p><p class="para">If this option matches the document-node <code class="code">/</code>, the entire document is replaced with the computed hash code. The result will be
          a text document.</p></td></tr><tr><td><p class="para"><code class="code">parameters</code></p></td><td><p class="para"><code class="code">map(xs:QName,item()*)?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">Parameters controlling the hash code computation. Keys, values and their meaning are dependent on the XProc processor used.</p></td></tr><tr><td><p class="para"><code class="code">version</code></p></td><td><p class="para"><code class="code">xs:string?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">Specifies the version of the hash computation algorithm used. If not specified, a default version is used, which depends on the value of
          the <code class="code option">algorithm</code> option. See the description below. </p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d642e15662"><a name="sect2-d642e15662"><!----></a><h2 class="sect2">Description</h2><p class="para">A hash code in the digital world is a, relatively simple, value computed from some, possibly lengthy, input data. The same input data always
      results in the same hash code. Hash codes are also called hash values, (hash) digests, (digital) fingerprints, or simply hashes. Hash codes are
      used for various purposes, see for instance <a href="https://en.wikipedia.org/wiki/Hash_function" target="_blank"><span class="link newpage">Wikipedia</span></a>.</p><p class="para">The <code class="code step">p:hash</code> step computes the hash code of the string value of the <code class="code option">value</code> option and inserts this into the document
      appearing on the <code class="code port">source</code> port. The result appears on the <code class="code port">result</code> port.</p><p class="para">The algorithm used for computing the hash code <span class="emphasis italic">must</span> be specified using the <code class="code option">algorithm</code> option. There are
      3&nbsp;predefined values, that must be supported by all XProc processors:</p><div class="table nonumber"><table class="table nonumber"><thead><tr><th><p class="para"><code class="code option">algorithm</code> option value</p></th><th><p class="para">Default version</p></th><th><p class="para">Algorithm used</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">crc</code></p></td><td><p class="para">32</p></td><td><p class="para"><a href="https://en.wikipedia.org/wiki/Cyclic_redundancy_check" target="_blank"><span class="link newpage">Cyclic Redundancy Check</span></a></p></td></tr><tr><td><p class="para"><code class="code">md</code></p></td><td><p class="para">5</p></td><td><p class="para"><a href="https://en.wikipedia.org/wiki/MD5" target="_blank"><span class="link newpage">Message-digest</span></a></p></td></tr><tr><td><p class="para"><code class="code">sha</code></p></td><td><p class="para">1</p></td><td><p class="para"><a href="https://en.wikipedia.org/wiki/SHA-1" target="_blank"><span class="link newpage">Secure Hash Algorithm</span></a></p></td></tr></tbody></table></div><p class="para">You can specify the algorithm version using the <code class="code option">version</code> option. If you don’t specify this option and use one of the
      predefined <code class="code option">algorithm</code> option values, the default version from the table above is used. </p></div><div class="sect2" id="sect2-d642e15816"><a name="sect2-d642e15816"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="sect3-d642e15819"><a name="sect3-d642e15819"><!----></a><h3 class="sect3">Basic usage</h3><p class="para">The following example illustrates what happens when we compute a hash value and use the default value for the <code class="code option">match</code> option
        (<code class="code">/*/node()</code>): all child nodes of the root element (in this example just the <code class="tag">&lt;hash&gt;</code> element) are replaced with the
      computed hash value.</p><p class="para keep-with-next">Source document:</p><div class="programlisting"><pre class="programlisting">&lt;hash-value&gt;
   &lt;hash&gt;Will be replaced by the hash value!&lt;/hash&gt;
&lt;/hash-value&gt;</pre></div><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:hash algorithm="crc" value="Hi there!"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;hash-value&gt;b5c57055b5c57055b5c57055&lt;/hash-value&gt;</pre></div><p class="para">The following example shows the different values computed using the different standard algorithms. These are placed in attribute
      values.</p><p class="para keep-with-next">Source document:</p><div class="programlisting"><pre class="programlisting">&lt;hash-values crc="" md="" sha=""/&gt;</pre></div><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:hash algorithm="crc" value="Hi there!" match="/*/@crc"/&gt;
  &lt;p:hash algorithm="md" value="Hi there!" match="/*/@md"/&gt;
  &lt;p:hash algorithm="sha" value="Hi there!" match="/*/@sha"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;hash-values crc="b5c57055"
             md="396199333edbf40ad43e62a1c1397793"
             sha="95e2b07e12754e52c37cfd485544d4f444597bff"/&gt;</pre></div></div><div class="sect3" id="p_hash-v31-hash-as-text"><a name="p_hash-v31-hash-as-text"><!----></a><h3 class="sect3">Hash code as text</h3><p class="para">If the <code class="code option">match</code> option matches the document-node <code class="code">/</code>, the resulting document will be a text document containing the
      computed hash code only. Notice that in this case the input document doesn’t matter.</p><p class="para keep-with-next">Source document:</p><div class="programlisting"><pre class="programlisting">&lt;anything/&gt;</pre></div><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:hash algorithm="crc" value="Hi there!" match="/"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para">Result text document:</p><div class="programlisting"><pre class="programlisting">b5c57055</pre></div></div></div><div class="sect2" id="sect2-d642e15856"><a name="sect2-d642e15856"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para"><code class="code step">p:hash</code> preserves all document-properties of the document(s) appearing on its <code class="code port">source</code> port.</p><p class="para">The exception is when the <code class="code option">match</code> option matches the document-node <code class="code">/</code>. In that case the resulting document will
      be of type text, the <code class="code property">content-type</code> document-property will become <code class="code">text/plain</code> and a
        <code class="code property">serialization</code> document-property is removed. Any other document-property is preserved. </p></li><li><p class="para">If an XProc processor supports any other algorithm, its code (as supplied to the <code class="code option">algorithm</code> option) will be in a
      namespace.</p></li><li><p class="para">If the <code class="code option">match</code> option matches an attribute called <code class="code">xml:base</code>, the base URI of this attribute’s parent
      element is amended accordingly. This is a side-effect of changing an attribute with a pre-defined meaning (and in this case probably never
      useful).</p></li></ul></div><div class="sect2" id="sect2-d642e15902"><a name="sect2-d642e15902"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0036"><a name="error-XC0036"><!----></a><a href="../error-codes.html#error-XC0036"><span class="link"><code class="code">XC0036</code></span></a></p></td><td><p class="para">It is a dynamic error if the requested hash algorithm is not one that the processor understands or if the value or parameters are not
        appropriate for that algorithm.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d642e15926"><a name="sect2-d642e15926"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:hash</code> step is for XProc version: <a href="../index.html"><span class="link">3.1</span></a>. This is a required step (an XProc 3.1 processor must support this).</p><p class="para">The formal specification for the <code class="code step">p:hash</code> step can be found <a href="https://spec.xproc.org/master/head/steps/#c.hash" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:hash</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="Standard_XProc_steps.html"><span class="link">Standard XProc steps</span></a></p></li><li><p class="para"><a href="Miscellaneous.html"><span class="link">Miscellaneous</span></a></p></li></ul><p class="para">The <code class="code step">p:hash</code> step is also present in version:
                <a href="../3.0/p.hash.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>