<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="xproc xprocref xml step p:file-info file-info file directory info information metadata"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:file-info (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.0/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><div class="sect1" id="sect1-d574e47994"><a name="sect1-d574e47994"><!----></a><h1 class="sect1"><a href="p.file-delete.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:file-info (3.1)&nbsp;<a href="p.file-mkdir.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Returns information about a file or directory.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d574e48007"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d574e48194"><span class="link">Description</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#result-document"><span class="link">The result document</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d574e48241"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#sect3-d574e48244"><span class="link">Basic usage</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d574e48261"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d574e48297"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d574e48360"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d574e48007"><a name="sect2-d574e48007"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:file-info"&gt;
  &lt;output port="result" primary="true" content-types="application/xml" sequence="false"/&gt;
  &lt;option name="href" as="xs:anyURI" required="true"/&gt;
  &lt;option name="fail-on-error" as="xs:boolean" required="false" select="true()"/&gt;
  &lt;option name="override-content-types" as="array(array(xs:string))?" required="false" select="()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:file-info</code> step returns information about a file or directory (or other file system object).</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Type</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">application/xml</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">A small XML document, describing the file or directory referenced by the <code class="code option">href</code> option. See <a href="#result-document" class="xref">The result document</a>.</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">href</code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The URI of the file or directory to describe.</p></td></tr><tr><td><p class="para"><code class="code">fail-on-error</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">Determines what happens if an error occurs during the operation:</p><ul class="itemizedlist"><li><p class="para">If this option is <code class="code">true</code> (default), an appropriate XProc error is raised.</p></li><li><p class="para">If this option is <code class="code">false</code>, the step returns a <code class="tag">&lt;c:error&gt;</code> document (see <a href="https://spec.xproc.org/master/head/xproc/#err-vocab" target="_blank"><span class="link newpage">here</span></a> for more information) on its <code class="code port">result</code>
        port.</p></li></ul></td></tr><tr><td><p class="para"><code class="code">override-content-types</code></p></td><td><p class="para"><code class="code">array(array(xs:string))?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">Use this to override the content-type determination of files.</p><p class="para">This works just like the mechanism for the <code class="code option">override-content-types</code> option of <code class="code step"><a href="p.archive-manifest.html"><span class="link">p:archive-manifest</span></a></code>,
          except that the regular expression matching is done against the absolute URI of the file.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d574e48194"><a name="sect2-d574e48194"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:file-info</code> step returns information about a file or directory (or other file system object) as a small XML document on its
        <code class="code port">result</code> port. What will be returned is dependent on the type of file system object, see <a href="#result-document" class="xref">The result document</a>.</p><div class="sect3" id="result-document"><a name="result-document"><!----></a><h3 class="sect3">The result document</h3><p class="para">The result document describing a file or directory consists of either a <code class="tag">&lt;c:file&gt;</code> or <code class="tag">&lt;c:directory&gt;</code> element (the
          <code class="code">c</code> prefix here is bound to the <code class="code">http://www.w3.org/ns/xproc-step</code> namespace). These elements and their attributes are
        the same as returned by <code class="code step"><a href="p.directory-list.html"><span class="link">p:directory-list</span></a></code> for such a file system object (with the <code class="code option">detailed</code> option set to
          <code class="code">true</code>). </p><p class="para">If the <code class="code option">href</code> option references any other system object (for instance, on Unix, a device), the result is
        implementation-defined and therefore depends on the XProc processor used.</p></div></div><div class="sect2" id="sect2-d574e48241"><a name="sect2-d574e48241"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="sect3-d574e48244"><a name="sect3-d574e48244"><!----></a><h3 class="sect3">Basic usage</h3><p class="para">The following example returns information about the <code class="code">data/</code> directory</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result"/&gt;

  &lt;p:file-info href="data/"/&gt;
  
&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;c:directory xmlns:c="http://www.w3.org/ns/xproc-step"
             xml:base="file:/…/…/data/"
             name="data"
             readable="true"
             writable="true"
             hidden="false"
             last-modified="2024-12-31T14:05:13.01Z"
             size="0"/&gt;</pre></div><p class="para">Notice that the result has an <code class="code">xml:base</code> attribute with the absolute URI of the object described. This is attribute is not
      mandatory, but you can very probably rely on it being there.</p><p class="para">Describing a file looks like this:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result"/&gt;

  &lt;p:file-info href="data/x.xml"/&gt;
  
&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;c:file xmlns:c="http://www.w3.org/ns/xproc-step"
        xml:base="file:/…/…/data/x.xml"
        name="x.xml"
        content-type="application/xml"
        readable="true"
        writable="true"
        hidden="false"
        last-modified="2024-12-31T14:05:13.01Z"
        size="88"/&gt;</pre></div></div></div><div class="sect2" id="sect2-d574e48261"><a name="sect2-d574e48261"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para">The document appearing on the <code class="code port">result</code> port only has a <code class="code property">content-type</code> property. It has no other
    document-properties (also no <code class="code property">base-uri</code>).</p></li><li><p class="para">Relative values for the <code class="code option">href</code> option are resolved against the base URI of the element on which this option is specified. In
      most cases this will be the static base URI of your pipeline (the path where the XProc source containing the <code class="code step">p:file-info</code> is stored).</p></li><li><p class="para">Working on “normal” files and/or directories (on disk, URI scheme <code class="code">file://</code>) is always supported. Whether any other
    types are supported is implementation-defined, and therefore depends on the XProc processor used. For this, also the interpretation/definition of
    what is a “directory” and “file” may vary.</p></li></ul></div><div class="sect2" id="sect2-d574e48297"><a name="sect2-d574e48297"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0134"><a name="error-XC0134"><!----></a><a href="../error-codes.html#error-XC0134"><span class="link"><code class="code">XC0134</code></span></a></p></td><td><p class="para">It is a dynamic error if an implementation does not support <code class="tag">&lt;p:file-info&gt;</code> for a specified scheme.</p></td></tr><tr><td><p class="para" id="error-XC0135"><a name="error-XC0135"><!----></a><a href="../error-codes.html#error-XC0135"><span class="link"><code class="code">XC0135</code></span></a></p></td><td><p class="para">It is a dynamic error if <code class="tag">&lt;p:file-info&gt;</code> is not available to the step due to access restrictions in the environment in which the
        pipeline is run.</p></td></tr><tr><td><p class="para" id="error-XD0011"><a name="error-XD0011"><!----></a><a href="../error-codes.html#error-XD0011"><span class="link"><code class="code">XD0011</code></span></a></p></td><td><p class="para">It is a dynamic error if the resource referenced by the <code class="code option">href</code> option does not exist, cannot be accessed or is not a
        file.</p></td></tr><tr><td><p class="para" id="error-XD0064"><a name="error-XD0064"><!----></a><a href="../error-codes.html#error-XD0064"><span class="link"><code class="code">XD0064</code></span></a></p></td><td><p class="para">It is a dynamic error if the base URI is not both absolute and valid according to <a href="https://www.rfc-editor.org/info/rfc3986" target="_blank"><span class="link newpage">RFC&nbsp;3986</span></a> .</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d574e48360"><a name="sect2-d574e48360"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:file-info</code> step is for XProc version: <a href="index.html"><span class="link">3.1</span></a>. This is a non-required step (an XProc 3.1 processor does not have to support this).</p><p class="para">The formal specification for the <code class="code step">p:file-info</code> step can be found <a href="https://spec.xproc.org/lastcall-2024-08/head/steps/#c.file-info" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:file-info</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="XProc_file_and_directory_related_steps.html"><span class="link">XProc file and directory related steps</span></a></p></li><li><p class="para"><a href="Interaction_with_the_environment.html"><span class="link">Interaction with the environment</span></a></p></li></ul><p class="para">The <code class="code step">p:file-info</code> step is also present in version:
                <a href="../3.0/p.file-info.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>