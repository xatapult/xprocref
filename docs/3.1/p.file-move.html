<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:file-move (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.0/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><div class="sect1" id="sect1-d517e43881"><a name="sect1-d517e43881"><!----></a><h1 class="sect1"><a href="p.file-mkdir.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:file-move (3.1)&nbsp;<a href="p.file-touch.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Moves or renames a file or directory.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d517e43894"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d517e44078"><span class="link">Description</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d517e44161"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#p_file-move-v31-basic-usage"><span class="link">Basic usage</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_file-move-v31-renaming"><span class="link">Renaming a file</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d517e44199"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d517e44238"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d517e44337"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d517e43894"><a name="sect2-d517e43894"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:file-move"&gt;
  &lt;output port="result" primary="true" content-types="application/xml" sequence="false"/&gt;
  &lt;option name="href" as="xs:anyURI" required="true"/&gt;
  &lt;option name="target" as="xs:anyURI" required="true"/&gt;
  &lt;option name="fail-on-error" as="xs:boolean" required="false" select="true()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:file-move</code> step moves (or renames) a file or directory to a different location (or name).</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Type</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">application/xml</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">A <code class="tag">&lt;c:result&gt;</code> element containing the absolute URI of the target (the <code class="code">c</code> prefix here is bound to the
            <code class="code">http://www.w3.org/ns/xproc-step</code> namespace).</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">href</code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The URI of the source file or directory to move (or rename).</p></td></tr><tr><td><p class="para"><code class="code">target</code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The URI of the target file or directory to move to.</p></td></tr><tr><td><p class="para"><code class="code">fail-on-error</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">Determines what happens if an error occurs during the operation:</p><ul class="itemizedlist"><li><p class="para">If this option is <code class="code">true</code> (default), an appropriate XProc error is raised.</p></li><li><p class="para">If this option is <code class="code">false</code>, the step returns a <code class="tag">&lt;c:error&gt;</code> document (see <a href="https://spec.xproc.org/master/head/xproc/#err-vocab" target="_blank"><span class="link newpage">here</span></a> for more information) on its
        <code class="code port">result</code> port.</p></li></ul></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d517e44078"><a name="sect2-d517e44078"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:file-move</code> step attempts to move (or rename) the file or directory specified in the <code class="code option">href</code> option to the location specified
      in the <code class="code option">target</code> option. The <code class="code port">result</code> port emits a small XML document with only a <code class="tag">&lt;c:result&gt;</code> element
      containing the absolute URI of the target (the <code class="code">c</code> prefix here is bound to the <code class="code">http://www.w3.org/ns/xproc-step</code>
      namespace).</p><p class="para">The inspiration for this step comes from the Unix <code class="code">mv</code> command. If you’re not used to it, it may come as a surprise that
        <span class="emphasis italic">moving</span> something can also mean <span class="emphasis italic">renaming</span> it:</p><ul class="itemizedlist"><li><p class="para">Moving <code class="code">file:///a/b/c.xml</code> to <code class="code">file:///a/b2/c.xml</code>&nbsp;<span class="emphasis italic">moves</span> the file to the <code class="code">b2</code>
          directory. See also the <a href="#p_file-move-v31-basic-usage"><span class="link">Basic usage</span></a> example.</p></li><li><p class="para">But moving <code class="code">file:///a/b/c.xml</code> to <code class="code">file:///a/b/c2.xml</code>&nbsp;<span class="emphasis italic">renames</span> the file. See also the
            <a href="#p_file-move-v31-renaming"><span class="link">Renaming a file</span></a> example.</p><p class="para">An example of renaming a directory can be found in the example <a href="p.file-copy.html#p_file-copy-v31-dir-copy-rename"><span class="link">Copying a directory under a different name</span></a> in step <code class="code step"><a href="p.file-copy.html"><span class="link">p:file-copy</span></a></code>.</p></li></ul><p class="para">If you’re moving into another directory, this directory must exist. A target must not exist.</p></div><div class="sect2" id="sect2-d517e44161"><a name="sect2-d517e44161"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="p_file-move-v31-basic-usage"><a name="p_file-move-v31-basic-usage"><!----></a><h3 class="sect3">Basic usage</h3><p class="para">The following example moves a file <code class="code">data/x1.xml</code> to <code class="code">build/x1-copied.xml</code>:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result"/&gt;
  
  &lt;p:file-move href="data/x1.xml" target="build/x1-copied.xml"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;file:/…/…/build/x1-copied.xml&lt;/c:result&gt;</pre></div><p class="para">Please note that the target <code class="code">build/</code> directory must exist, without an existing <code class="code">x1-copied.xml</code> file.</p></div><div class="sect3" id="p_file-move-v31-renaming"><a name="p_file-move-v31-renaming"><!----></a><h3 class="sect3">Renaming a file</h3><p class="para">The following example <span class="emphasis italic">renames</span> an existing file <code class="code">build/x1.xml</code> to <code class="code">build/x2.xml</code>:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result"/&gt;
  
  &lt;p:file-move href="build/x1.xml" target="build/x2.xml"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;file:/…/…/build/x2.xml&lt;/c:result&gt;</pre></div></div></div><div class="sect2" id="sect2-d517e44199"><a name="sect2-d517e44199"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para">The document appearing on the <code class="code port">result</code> port only has a <code class="code property">content-type</code> property. It has no other
    document-properties (also no <code class="code property">base-uri</code>).</p></li><li><p class="para">Relative values for the <code class="code option">href</code> and <code class="code option">target</code> options are resolved against the base URI of the element on which
      this option is specified. In most cases this will be the static base URI of your pipeline (the path where the XProc source containing the
      <code class="code step">p:file-move</code> is stored).</p></li><li><p class="para">Working on “normal” files and/or directories (on disk, URI scheme <code class="code">file://</code>) is always supported. Whether any other
    types are supported is implementation-defined, and therefore depends on the XProc processor used. For this, also the interpretation/definition of
    what is a “directory” and “file” may vary.</p></li></ul></div><div class="sect2" id="sect2-d517e44238"><a name="sect2-d517e44238"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0050"><a name="error-XC0050"><!----></a><a href="../error-codes.html#error-XC0050"><span class="link"><code class="code">XC0050</code></span></a></p></td><td><p class="para">It is a dynamic error the file or directory cannot be copied to the specified location.</p></td></tr><tr><td><p class="para" id="error-XC0115"><a name="error-XC0115"><!----></a><a href="../error-codes.html#error-XC0115"><span class="link"><code class="code">XC0115</code></span></a></p></td><td><p class="para">It is a dynamic error if the resource referenced by the <code class="code option">target</code> option is an existing file or other file system
        object.</p></td></tr><tr><td><p class="para" id="error-XC0148"><a name="error-XC0148"><!----></a><a href="../error-codes.html#error-XC0148"><span class="link"><code class="code">XC0148</code></span></a></p></td><td><p class="para">It is a dynamic error if an implementation does not support <code class="tag">&lt;p:file-move&gt;</code> for a specified scheme.</p></td></tr><tr><td><p class="para" id="error-XC0149"><a name="error-XC0149"><!----></a><a href="../error-codes.html#error-XC0149"><span class="link"><code class="code">XC0149</code></span></a></p></td><td><p class="para">It is a dynamic error if <code class="tag">&lt;p:file-move&gt;</code> is not available to the step due to access restrictions in the environment in which the
        pipeline is run.</p></td></tr><tr><td><p class="para" id="error-XC0158"><a name="error-XC0158"><!----></a><a href="../error-codes.html#error-XC0158"><span class="link"><code class="code">XC0158</code></span></a></p></td><td><p class="para">It is a dynamic error if the <code class="code option">href</code> option names a directory, but the <code class="code option">target</code> option names a file.</p></td></tr><tr><td><p class="para" id="error-XD0011"><a name="error-XD0011"><!----></a><a href="../error-codes.html#error-XD0011"><span class="link"><code class="code">XD0011</code></span></a></p></td><td><p class="para">It is a dynamic error if the resource referenced by the <code class="code option">href</code> option does not exist, cannot be accessed or is not a
        file.</p></td></tr><tr><td><p class="para" id="error-XD0064"><a name="error-XD0064"><!----></a><a href="../error-codes.html#error-XD0064"><span class="link"><code class="code">XD0064</code></span></a></p></td><td><p class="para">It is a dynamic error if the base URI is not both absolute and valid according to <a href="https://www.rfc-editor.org/info/rfc3986" target="_blank"><span class="link newpage">RFC&nbsp;3986</span></a> .</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d517e44337"><a name="sect2-d517e44337"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:file-move</code> step is for XProc version: <a href="index.html"><span class="link">3.1</span></a>. This is a non-required step (an XProc 3.1 processor does not have to support this).</p><p class="para">The formal specification for the <code class="code step">p:file-move</code> step can be found <a href="https://spec.xproc.org/lastcall-2024-08/head/steps/#c.file-move" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:file-move</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="XProc_file_and_directory_related_steps.html"><span class="link">XProc file and directory related steps</span></a></p></li><li><p class="para"><a href="Interaction_with_the_environment.html"><span class="link">Interaction with the environment</span></a></p></li></ul><p class="para">The <code class="code step">p:file-move</code> step is also present in version:
                <a href="../3.0/p.file-move.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>