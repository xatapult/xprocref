<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:namespace-rename (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.0/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><p class="para page-banner">This site is work in progress and does not yet describe all available steps.</p><div class="sect1" id="sect1-d438e40048"><a name="sect1-d438e40048"><!----></a><h1 class="sect1"><a href="p.namespace-delete.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:namespace-rename (3.1)&nbsp;<a href="p.pack.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Renames a namespace to a new URI.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d438e40061"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d438e40229"><span class="link">Description</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#apply-to"><span class="link">The apply-to option</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#details"><span class="link">Detailed processing</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d438e40433"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#sect3-d438e40436"><span class="link">Basic usage</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#sect3-d438e40448"><span class="link">Renaming to a namespace</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d438e40470"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d438e40495"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d438e40540"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d438e40061"><a name="sect2-d438e40061"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:namespace-rename"&gt;
  &lt;input port="source" primary="true" content-types="xml html" sequence="false"/&gt;
  &lt;output port="result" primary="true" content-types="xml html" sequence="false"/&gt;
  &lt;option name="apply-to" as="item()*" required="false" select="'all'" values="('all','elements','attributes')"/&gt;
  &lt;option name="from" as="xs:anyURI?" required="false" select="()"/&gt;
  &lt;option name="to" as="xs:anyURI?" required="false" select="()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:namespace-rename</code> step renames any namespace declaration or use of a namespace in a document to a new value.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Type</p></th><th><p class="para">Port</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">input</code></p></td><td><p class="para"><code class="code">source</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">xml html</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">The document to rename the namespace in.</p></td></tr><tr><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">xml html</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">The resulting document.</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">apply-to</code></p></td><td><p class="para"><code class="code">item()*</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">all</code></p></td><td><p class="para">Whether to apply the changes to elements, attributes or both. See <a href="#apply-to" class="xref">The apply-to option</a> below.</p></td></tr><tr><td><p class="para"><code class="code">from</code></p></td><td><p class="para"><code class="code">xs:anyURI?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">The namespace URI to rename from.</p></td></tr><tr><td><p class="para"><code class="code">to</code></p></td><td><p class="para"><code class="code">xs:anyURI?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">The namespace URI to rename to.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d438e40229"><a name="sect2-d438e40229"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:namespace-rename</code> step changes a namespace in a document into another namespace. It affects both the namespace bindings and the namespace usage.
      Usually that's all there is to it, you can rely on the step to take care of all the details (for those that need to know, see <a href="#details" class="xref">Detailed processing</a>).</p><p class="para">If you want to remove a namespace altogether, you need <code class="code step"><a href="p.namespace-delete.html"><span class="link">p:namespace-delete</span></a></code>.</p><div class="sect3" id="apply-to"><a name="apply-to"><!----></a><h3 class="sect3">The <code class="code option">apply-to</code> option</h3><p class="para">The <code class="code option">apply-to</code> option can take the following values:</p><div class="table nonumber"><table class="table nonumber"><thead><tr><th><p class="para">Value</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">all</code> (default) </p></td><td><p class="para">Apply the changes to both elements and attributes.</p></td></tr><tr><td><p class="para"><code class="code">attributes</code></p></td><td><p class="para">Apply the changes to attributes only.</p></td></tr><tr><td><p class="para"><code class="code">elements</code></p></td><td><p class="para">Apply the changes to elements only.</p></td></tr></tbody></table></div><p class="para">The main reason for having an <code class="code option">apply-to</code> option is to avoid renaming attributes when the <code class="code option">from</code> option
        specifies no namespace. This happens when you want to turn a document that is not in a namespace into some namespace. Often however,
        attributes are never in a namespace. By setting the <code class="code option">apply-to</code> option to <code class="code">elements</code>, the attributes are not
        affected.</p></div><div class="sect3" id="details"><a name="details"><!----></a><h3 class="sect3">Detailed processing</h3><p class="para">The step takes the document appearing on its <code class="code port">source</code> port and examines it for occurrences of the namespace mentioned in the
          <code class="code option">from</code> option:</p><ul class="itemizedlist"><li><p class="para">A <span class="emphasis italic">namespace binding</span> with the <code class="code option">from</code> value, either defining a prefix (<code class="code">xmlns:…="…"</code>) or
            a default namespace (<code class="code">xmlns="…"</code>) declaration, gets the value as specified in the <code class="code option">to</code> option.</p><p class="para">If the <code class="code option">from</code> option is absent or the empty string, no bindings are changed/removed.</p><p class="para">If the <code class="code option">to</code> option is not specified or the empty string, the binding is removed.</p></li><li><p class="para">Depending on the value of the <code class="code option">apply-to</code> option (see <a href="#apply-to" class="xref">The apply-to option</a>), elements and/or attributes that are
            in the <code class="code option">from</code> namespace are turned into the <code class="code option">to</code> namespace.</p><p class="para">If the <code class="code option">from</code> option is absent to the empty string, the changes apply to elements/attributes without a namespace (that
            are in the no-namespace).</p><p class="para">If the <code class="code option">to</code> option is not specified or the empty string, the namespace of the element/attribute is removed (putting it
            into the no-namespace).</p></li></ul></div></div><div class="sect2" id="sect2-d438e40433"><a name="sect2-d438e40433"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="sect3-d438e40436"><a name="sect3-d438e40436"><!----></a><h3 class="sect3">Basic usage</h3><p class="para keep-with-next">Source document:</p><div class="programlisting"><pre class="programlisting">&lt;some-document xmlns="#some-namespace"&gt;
   &lt;contents a="b"/&gt;
&lt;/some-document&gt;</pre></div><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:namespace-rename from="#some-namespace" to="#some-other-namespace"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;some-document xmlns="#some-other-namespace"&gt;
   &lt;contents a="b"/&gt;
&lt;/some-document&gt;</pre></div><p class="para">This also works when the source document uses a namespace prefix:</p><div class="programlisting"><pre class="programlisting">&lt;ns:some-document xmlns:ns="#some-namespace"&gt;
   &lt;ns:contents a="b"/&gt;
&lt;/ns:some-document&gt;</pre></div><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:namespace-rename from="#some-namespace" to="#some-other-namespace"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;ns:some-document xmlns:ns="#some-other-namespace"&gt;
   &lt;ns:contents a="b"/&gt;
&lt;/ns:some-document&gt;</pre></div></div><div class="sect3" id="sect3-d438e40448"><a name="sect3-d438e40448"><!----></a><h3 class="sect3">Renaming to a namespace</h3><p class="para">If you rename a document from the no-namespace into a namespace, you usually <span class="emphasis italic">don’t</span> want to rename the attributes
      to that namespace as well. However, if you don’t do anything special, this is exactly what will happen:</p><p class="para keep-with-next">Source document:</p><div class="programlisting"><pre class="programlisting">&lt;some-document&gt;
   &lt;contents a="b"/&gt;
&lt;/some-document&gt;</pre></div><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:namespace-rename to="#some-namespace"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;some-document xmlns="#some-namespace"&gt;
   &lt;contents xmlns:_1="#some-namespace" _1:a="b"/&gt;
&lt;/some-document&gt;</pre></div><p class="para">The XProc processor invents a namespace prefix, and uses this to put the attribute(s) in the target namespace as well. To avoid this,
          set the <code class="code option">apply-to</code> option to <code class="code">elements:</code></p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:namespace-rename to="#some-namespace" apply-to="elements"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;some-document xmlns="#some-namespace"&gt;
   &lt;contents a="b"/&gt;
&lt;/some-document&gt;</pre></div></div></div><div class="sect2" id="sect2-d438e40470"><a name="sect2-d438e40470"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para"><code class="code step">p:namespace-rename</code> preserves all document-properties of the document(s) appearing on its <code class="code port">source</code> port.</p></li><li><p class="para">If the value of the <code class="code option">from</code> and <code class="code option">to</code> option are the same nothing happens. The step acts like a <code class="code step"><a href="p.identity.html"><span class="link">p:identity</span></a></code> step.</p></li></ul></div><div class="sect2" id="sect2-d438e40495"><a name="sect2-d438e40495"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0014"><a name="error-XC0014"><!----></a><a href="../error-codes.html#error-XC0014"><span class="link"><code class="code">XC0014</code></span></a></p></td><td><p class="para">It is a dynamic error if the XML namespace (<code class="uri">http://www.w3.org/XML/1998/namespace</code>) or the XMLNS namespace
          (<code class="uri">http://www.w3.org/2000/xmlns/</code>) is the value of either the <code class="code option">from</code> option or the <code class="code option">to</code> option.</p></td></tr><tr><td><p class="para" id="error-XC0092"><a name="error-XC0092"><!----></a><a href="../error-codes.html#error-XC0092"><span class="link"><code class="code">XC0092</code></span></a></p></td><td><p class="para">It is a dynamic error if as a consequence of changing or removing the namespace of an attribute the attribute's name is not unique on the
        respective element.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d438e40540"><a name="sect2-d438e40540"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:namespace-rename</code> step is for XProc version: <a href="index.html"><span class="link">3.1</span></a>. This is a required step (an XProc 3.1 processor must support this).</p><p class="para">The formal specification for the <code class="code step">p:namespace-rename</code> step can be found <a href="https://spec.xproc.org/lastcall-2024-08/head/steps/#c.namespace-rename" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:namespace-rename</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="Standard_XProc_steps.html"><span class="link">Standard XProc steps</span></a></p></li><li><p class="para"><a href="Basic_XML_manipulation.html"><span class="link">Basic XML manipulation</span></a></p></li><li><p class="para"><a href="Namespace_handling.html"><span class="link">Namespace handling</span></a></p></li></ul><p class="para">The <code class="code step">p:namespace-rename</code> step is also present in version:
                <a href="../3.0/p.namespace-rename.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>