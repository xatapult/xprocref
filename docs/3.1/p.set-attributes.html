<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:set-attributes (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.1/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><p class="para page-banner">This site is work in progress and therefore incomplete yet.</p><div class="sect1" id="sect1-d262e9166"><a name="sect1-d262e9166"><!----></a><h1 class="sect1"><a href="p.namespace-delete.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:set-attributes (3.1)&nbsp;<a href="p.set-properties.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Add (or replace) attributes on a set of elements.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d262e9179"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d262e9341"><span class="link">Description</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d262e9402"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#sect3-d262e9405"><span class="link">Adding/replacing multiple attributes</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d262e9426"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d262e9458"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d262e9500"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d262e9179"><a name="sect2-d262e9179"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:set-attributes"&gt;
  &lt;input port="source" primary="true" content-types="xml html" sequence="false"/&gt;
  &lt;output port="result" primary="true" content-types="xml html" sequence="false"/&gt;
  &lt;option name="attributes" as="map(xs:QName, xs:anyAtomicType)" required="true"/&gt;
  &lt;option name="match" as="xs:string" required="false" select="'/*'"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:set-attributes</code> step adds (or replaces) attributes as specified in the <code class="code option">attributes</code> option map. This is
      done for the element(s) matched by the <code class="code option">match</code> option.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Type</p></th><th><p class="para">Port</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">input</code></p></td><td><p class="para"><code class="code">source</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">xml html</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">The document to add (or replace) the attributes on.</p></td></tr><tr><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">xml html</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">The resulting document.</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">attributes</code></p></td><td><p class="para"><code class="code">map(xs:QName, xs:anyAtomicType)</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">A map with entries (attribute name, attribute value).</p><p class="para">If this map is empty, nothing will happen and the step acts as a <code class="code step"><a href="p.identity.html"><span class="link">p:identity</span></a></code> step.</p></td></tr><tr><td><p class="para"><code class="code">match</code></p></td><td><p class="para"><code class="code">xs:string</code> (XSLT selection pattern)</p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">'/*'</code></p></td><td><p class="para">The XSLT match pattern that selects the element(s) to add (or replace) the attributes on. If not specified, the root element is
          used.</p><p class="para">This must be an XSLT match pattern that matches an element. If it matches any other kind of node, error <code class="code"><a href="#error-XC0023"><span class="link">XC0023</span></a></code>
          is raised.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d262e9341"><a name="sect2-d262e9341"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:set-attribute</code> step:</p><ul class="itemizedlist"><li><p class="para">Takes the document appearing on its <code class="code port">source</code> port.</p></li><li><p class="para">Processes the elements that match the pattern in the <code class="code option">match</code> option:</p><ul class="itemizedlist"><li><p class="para">If a selected element does <span class="emphasis italic">not</span> contain an attribute with a name that is a key in the
                <code class="code option">attributes</code> option map, an attribute with this name and a value as associated in the map is added to it.</p></li><li><p class="para">If a selected element already has such an attribute, its value is replaced with the value as associated in the map.</p></li></ul></li><li><p class="para">The resulting document appears on its <code class="code port">result</code> port.</p></li></ul><p class="para">If you just want to set a single attribute, you can also use the <code class="code step"><a href="p.add-attribute.html"><span class="link">p:add-attribute</span></a></code> step.</p></div><div class="sect2" id="sect2-d262e9402"><a name="sect2-d262e9402"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="sect3-d262e9405"><a name="sect3-d262e9405"><!----></a><h3 class="sect3">Adding/replacing multiple attributes</h3><p class="para">This example adds the <code class="code">type="special"</code> and a <code class="code">level="2"</code> attributes to all <code class="tag">&lt;text&gt;</code> elements. One of the input
        <code class="tag">&lt;text&gt;</code> elements already has a <code class="code">type</code> attribute, but with a different value. This existing attribute is replaced.</p><p class="para keep-with-next">Source document:</p><div class="programlisting"><pre class="programlisting">&lt;texts&gt;
   &lt;text&gt;Hello there!&lt;/text&gt;
   &lt;text&gt;This is funny…&lt;/text&gt;
   &lt;text type="normal"&gt;And that's normal.&lt;/text&gt;
&lt;/texts&gt;</pre></div><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:set-attributes match="text" attributes="map{'type': 'special', 'level': 2}"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;texts&gt;
   &lt;text type="special" level="2"&gt;Hello there!&lt;/text&gt;
   &lt;text type="special" level="2"&gt;This is funny…&lt;/text&gt;
   &lt;text type="special" level="2"&gt;And that's normal.&lt;/text&gt;
&lt;/texts&gt;</pre></div></div></div><div class="sect2" id="sect2-d262e9426"><a name="sect2-d262e9426"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para"><code class="code step">p:set-attributes</code> preserves all document-properties of the document(s) appearing on its <code class="code port">source</code> port.</p></li><li><p class="para">If an attribute called <code class="code">xml:base</code> is added or changed, the base URI of the element is updated accordingly. See also category
    <a href="Base_URI_related.html"><span class="link">Base URI related</span></a>.</p></li><li><p class="para">You cannot use this step to add or change a namespace declaration. Attempting to do so will result in error <code class="code"><a href="#error-XC0059"><span class="link">XC0059</span></a></code>.</p><p class="para">Note, however, that it is possible to add an attribute whose namespace is not in scope on the element it is added to. The XProc namespace
      fixup mechanism will take care of handling this and add the appropriate namespace declarations. </p></li></ul></div><div class="sect2" id="sect2-d262e9458"><a name="sect2-d262e9458"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0023"><a name="error-XC0023"><!----></a><a href="../error-codes.html#error-XC0023"><span class="link"><code class="code">XC0023</code></span></a></p></td><td><p class="para">It is a dynamic error if that pattern matches anything other than element nodes.</p></td></tr><tr><td><p class="para" id="error-XC0059"><a name="error-XC0059"><!----></a><a href="../error-codes.html#error-XC0059"><span class="link"><code class="code">XC0059</code></span></a></p></td><td><p class="para">It is a dynamic error if the QName value in the <code class="code option">attribute-name</code> option uses the prefix “<code class="literal">xmlns</code>” or any
        other prefix that resolves to the namespace name <code class="uri">http://www.w3.org/2000/xmlns/</code>. </p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d262e9500"><a name="sect2-d262e9500"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:set-attributes</code> step is for XProc version: <a href="../index.html"><span class="link">3.1</span></a>. This is a required step (an XProc 3.1 processor must support this).</p><p class="para">The formal specification for the <code class="code step">p:set-attributes</code> step can be found <a href="https://spec.xproc.org/lastcall-2024-08/head/steps/#c.set-attributes" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:set-attributes</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="Standard_XProc_steps.html"><span class="link">Standard XProc steps</span></a></p></li><li><p class="para"><a href="Base_URI_related.html"><span class="link">Base URI related</span></a></p></li><li><p class="para"><a href="Basic_XML_manipulation.html"><span class="link">Basic XML manipulation</span></a></p></li></ul><p class="para">The <code class="code step">p:set-attributes</code> step is also present in version:
                <a href="../3.0/p.set-attributes.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>