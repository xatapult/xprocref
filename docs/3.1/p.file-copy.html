<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="xproc xprocref xml step p:file-copy file-copy file directory copy"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:file-copy (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.1/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><div class="sect1" id="sect1-d631e11985"><a name="sect1-d631e11985"><!----></a><h1 class="sect1"><a href="p.error.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:file-copy (3.1)&nbsp;<a href="p.file-create-tempfile.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Copies a file or directory.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d631e11998"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d631e12226"><span class="link">Description</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d631e12267"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#sect3-d631e12270"><span class="link">Basic usage</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_file-copy-v31-dir-copy-rename"><span class="link">Copying a directory under a different name</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d631e12304"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d631e12343"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d631e12430"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d631e11998"><a name="sect2-d631e11998"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:file-copy"&gt;
  &lt;output port="result" primary="true" content-types="application/xml" sequence="false"/&gt;
  &lt;option name="href" as="xs:anyURI" required="true"/&gt;
  &lt;option name="target" as="xs:anyURI" required="true"/&gt;
  &lt;option name="fail-on-error" as="xs:boolean" required="false" select="true()"/&gt;
  &lt;option name="overwrite" as="xs:boolean" required="false" select="true()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:file-copy</code> step copies a file or a directory to a given target.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Type</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">application/xml</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">A <code class="tag">&lt;c:result&gt;</code> element containing the absolute URI of the target (the <code class="code">c</code> prefix here is bound to the
            <code class="code">http://www.w3.org/ns/xproc-step</code> namespace).</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">href</code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The URI of the source file or directory to copy from.</p></td></tr><tr><td><p class="para"><code class="code">target</code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The URI of the target file or directory to copy to.</p></td></tr><tr><td><p class="para"><code class="code">fail-on-error</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">Determines what happens if an error occurs during the operation:</p><ul class="itemizedlist"><li><p class="para">If this option is <code class="code">true</code> (default), an appropriate XProc error is raised.</p></li><li><p class="para">If this option is <code class="code">false</code>, the step returns a <code class="tag">&lt;c:error&gt;</code> document (see <a href="https://spec.xproc.org/master/head/xproc/#err-vocab" target="_blank"><span class="link newpage">here</span></a> for more information) on its <code class="code port">result</code>
        port.</p></li></ul><p class="para">If you’re copying a directory, please note that an error may mean that a partial copy has already been made.</p></td></tr><tr><td><p class="para"><code class="code">overwrite</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">Determines what happens if <code class="code step">p:file-copy</code> needs to overwrite an existing file:</p><ul class="itemizedlist"><li><p class="para">If this option is <code class="code">true</code> (default), the existing file is overwritten.</p></li><li><p class="para">If this option is <code class="code">false</code>, no existing file will be changed.</p></li></ul></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d631e12226"><a name="sect2-d631e12226"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:file-copy</code> step copies a file or a directory, as specified in the <code class="code option">href</code> option, to the target specified in the
        <code class="code option">target</code> option. Any non-existent directory in the <code class="code option">target</code> option value will be created. The
        <code class="code port">result</code> port emits a small XML document with only a <code class="tag">&lt;c:result&gt;</code> element containing the absolute URI of the target (the
        <code class="code">c</code> prefix here is bound to the <code class="code">http://www.w3.org/ns/xproc-step</code> namespace). </p><p class="para">If the <code class="code option">target</code> option specifies an existing directory (existing on disk), the step attempts to copy the source file or
      directory <span class="emphasis italic">into</span> that target directory, preserving the name of the source. This means that you cannot use <code class="code step">p:file-copy</code> to copy a
      directory to another location under a different name. See the <a href="#p_file-copy-v31-dir-copy-rename"><span class="link">Copying a directory under a different name</span></a> example on how to achieve this.</p></div><div class="sect2" id="sect2-d631e12267"><a name="sect2-d631e12267"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="sect3-d631e12270"><a name="sect3-d631e12270"><!----></a><h3 class="sect3">Basic usage</h3><p class="para">The following example copies a file <code class="code">data/x1.xml</code> to <code class="code">build/x1-copied</code>:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result"/&gt;

  &lt;p:file-copy href="data/x1.xml" target="build/x1-copied.xml"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;file:/…/…/build/x1-copied.xml&lt;/c:result&gt;</pre></div></div><div class="sect3" id="p_file-copy-v31-dir-copy-rename"><a name="p_file-copy-v31-dir-copy-rename"><!----></a><h3 class="sect3">Copying a directory under a different name</h3><p class="para">If you’re copying a directory, the <code class="code step">p:file-copy</code> step always copies this <span class="emphasis italic">into</span> the designated target directory. This
      means that you cannot copy a directory to another location under a different name. In order to achieve this, you subsequently must rename the
      copied result using <code class="code step"><a href="p.file-move.html"><span class="link">p:file-move</span></a></code>:</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result"/&gt;

  &lt;p:file-copy href="data/" target="build/"/&gt;
  &lt;p:file-move href="build/data/" target="build/data-renamed/"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para">Result document (of the <code class="code step"><a href="p.file-move.html"><span class="link">p:file-move</span></a></code>):</p><div class="programlisting"><pre class="programlisting">&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;file:/…/…/build/data-renamed/&lt;/c:result&gt;</pre></div></div></div><div class="sect2" id="sect2-d631e12304"><a name="sect2-d631e12304"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para">The document appearing on the <code class="code port">result</code> port only has a <code class="code property">content-type</code> property. It has no other
    document-properties (also no <code class="code property">base-uri</code>).</p></li><li><p class="para">Relative values for the <code class="code option">href</code> and <code class="code option">target</code> options are resolved against the base URI of the element on which
      this option is specified. In most cases this will be the static base URI of your pipeline (the path where the XProc source containing the
      <code class="code step">p:file-copy</code> is stored).</p></li><li><p class="para">Working on “normal” files and/or directories (on disk, URI scheme <code class="code">file://</code>) is always supported. Whether any other
    types are supported is implementation-defined, and therefore depends on the XProc processor used. For this, also the interpretation/definition of
    what is a “directory” and “file” may vary.</p></li></ul></div><div class="sect2" id="sect2-d631e12343"><a name="sect2-d631e12343"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0050"><a name="error-XC0050"><!----></a><a href="../error-codes.html#error-XC0050"><span class="link"><code class="code">XC0050</code></span></a></p></td><td><p class="para">It is a dynamic error the file or directory cannot be copied to the specified location.</p></td></tr><tr><td><p class="para" id="error-XC0144"><a name="error-XC0144"><!----></a><a href="../error-codes.html#error-XC0144"><span class="link"><code class="code">XC0144</code></span></a></p></td><td><p class="para">It is a dynamic error if an implementation does not support <code class="tag">&lt;p:file-copy&gt;</code> for a specified scheme.</p></td></tr><tr><td><p class="para" id="error-XC0145"><a name="error-XC0145"><!----></a><a href="../error-codes.html#error-XC0145"><span class="link"><code class="code">XC0145</code></span></a></p></td><td><p class="para">It is a dynamic error if <code class="tag">&lt;p:file-copy&gt;</code> is not available to the step due to access restrictions in the environment in which the
        pipeline is run.</p></td></tr><tr><td><p class="para" id="error-XC0157"><a name="error-XC0157"><!----></a><a href="../error-codes.html#error-XC0157"><span class="link"><code class="code">XC0157</code></span></a></p></td><td><p class="para">It is a dynamic error if the <code class="code option">href</code> option names a directory, but the <code class="code option">target</code> option names a file.</p></td></tr><tr><td><p class="para" id="error-XD0011"><a name="error-XD0011"><!----></a><a href="../error-codes.html#error-XD0011"><span class="link"><code class="code">XD0011</code></span></a></p></td><td><p class="para">It is a dynamic error if the resource referenced by the <code class="code option">href</code> option does not exist, cannot be accessed or is not a
        file.</p></td></tr><tr><td><p class="para" id="error-XD0064"><a name="error-XD0064"><!----></a><a href="../error-codes.html#error-XD0064"><span class="link"><code class="code">XD0064</code></span></a></p></td><td><p class="para">It is a dynamic error if the base URI is not both absolute and valid according to <a href="https://www.rfc-editor.org/info/rfc3986" target="_blank"><span class="link newpage">RFC&nbsp;3986</span></a> .</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d631e12430"><a name="sect2-d631e12430"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:file-copy</code> step is for XProc version: <a href="../index.html"><span class="link">3.1</span></a>. This is a non-required step (an XProc 3.1 processor does not have to support this).</p><p class="para">The formal specification for the <code class="code step">p:file-copy</code> step can be found <a href="https://spec.xproc.org/master/head/file/#c.file-copy" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:file-copy</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="XProc_file_and_directory_related_steps.html"><span class="link">XProc file and directory related steps</span></a></p></li><li><p class="para"><a href="Interaction_with_the_environment.html"><span class="link">Interaction with the environment</span></a></p></li></ul><p class="para">The <code class="code step">p:file-copy</code> step is also present in version:
                <a href="../3.0/p.file-copy.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>