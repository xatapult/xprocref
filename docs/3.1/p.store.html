<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:store (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.0/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><div class="sect1" id="sect1-d475e48149"><a name="sect1-d475e48149"><!----></a><h1 class="sect1"><a href="p.split-sequence.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:store (3.1)&nbsp;<a href="p.string-replace.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Stores a document.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d475e48162"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d475e48402"><span class="link">Description</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d475e48422"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#sect3-d475e48425"><span class="link">Basic usage</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#sect3-d475e48447"><span class="link">Using p:store for writing intermediate results</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d475e48473"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d475e48487"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d475e48511"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d475e48162"><a name="sect2-d475e48162"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:store"&gt;
  &lt;input port="source" primary="true" content-types="any" sequence="false"/&gt;
  &lt;output port="result" primary="true" content-types="any" sequence="false"/&gt;
  &lt;output port="result-uri" primary="false" content-types="application/xml" sequence="false"/&gt;
  &lt;option name="href" as="xs:anyURI" required="true"/&gt;
  &lt;option name="serialization" as="map(xs:QName,item()*)?" required="false" select="()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:store</code> step stores the document appearing on its <code class="code port">source</code> port to a URI. This document is passed unchanged to the
        <code class="code port">result</code> port. It outputs the absolute URI of the location of the stored document on the <code class="code port">result-uri</code> port.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Type</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">source</code></p></td><td><p class="para"><code class="code">input</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">any</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">The document to store.</p></td></tr><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">any</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">The resulting document. This will be exactly the same as the document on the <code class="code port">source</code> port.</p></td></tr><tr><td><p class="para"><code class="code">result-uri</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">application/xml</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para">An XML document consisting of just a single <code class="tag">&lt;c:result&gt;</code> element containing the <span class="emphasis italic">absolute</span> URI the document is
          stored to (the <code class="code">c</code> prefix here is bound to the <code class="code">http://www.w3.org/ns/xproc-step</code> namespace).</p><p class="para">Example: <code class="code">&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;file:///some/path/document.xml&lt;/c:result&gt;</code></p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">href</code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The URI to store the document to.</p><p class="para">In most cases, <code class="code step">p:store</code> will be used to store a document to disk. An absolute URI for this must start with <code class="code">file://</code>. For
          instance, on Windows, <code class="code">file:///C:/some/path/document.xml</code> (although Windows uses backslashes (<code class="code">\</code>) to separate path
          components, slashes (<code class="code">/</code>) work fine and are more universal). Using a single slash after <code class="code">file:</code> also works:
            <code class="code">file:/C:/some/path/document.xml</code>. An attempt will be made to create all non-existing folders in the path.</p><p class="para">If this value is relative, it is resolved against the base URI of the element on which this option is specified. In most cases this will
          be the static base URI of your pipeline (the path where the XProc source containing the <code class="code step">p:store</code> step is stored).</p></td></tr><tr><td><p class="para"><code class="code">serialization</code></p></td><td><p class="para"><code class="code">map(xs:QName,item()*)?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">This option can supply a map with <a href="https://www.w3.org/TR/xslt-xquery-serialization-31/" target="_blank"><span class="link newpage">serialization
            properties</span></a> for storing the document.</p><p class="para">If the source document has a <code class="code property">serialization</code> document-property, the two sets of serialization properties are merged
    (properties in the document-property have precedence).</p><p class="para">Example: <code class="code">serialization="map{'indent':&nbsp;true()}"</code></p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d475e48402"><a name="sect2-d475e48402"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:store</code> step stores the document appearing on its <code class="code port">source</code> port to a URI. This document is passed unchanged to the
        <code class="code port">result</code> port. So within the pipeline the step acts as a <code class="code step"><a href="p.identity.html"><span class="link">p:identity</span></a></code> step.</p><p class="para">It outputs the absolute URI of the location of the stored document on the <code class="code port">result-uri</code> port.</p></div><div class="sect2" id="sect2-d475e48422"><a name="sect2-d475e48422"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="sect3-d475e48425"><a name="sect3-d475e48425"><!----></a><h3 class="sect3">Basic usage</h3><p class="para">Whatever input document is passed to the following pipeline, it is stored to disk in a document <code class="code">tmp/x.xml</code>, relative to where
      the pipeline is stored. The final <code class="code step"><a href="p.identity.html"><span class="link">p:identity</span></a></code> step is just used to show you the document appearing on the
        <code class="code port">result-uri</code> port.</p><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:input port="source"/&gt;
  &lt;p:output port="result"/&gt;

  &lt;p:store href="tmp/x.xml"/&gt;
  
  &lt;p:identity&gt;
    &lt;p:with-input pipe="result-uri"/&gt;
  &lt;/p:identity&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;c:result xmlns:c="http://www.w3.org/ns/xproc-step"&gt;file:/…/…/x.xml&lt;/c:result&gt;</pre></div><p class="para">Doing something with what appears on the <code class="code port">result-uri</code> port is of course completely optional. If you don’t attach anything
      to this port, the <code class="tag">&lt;c:result&gt;</code> document will simply disappear into oblivion.</p></div><div class="sect3" id="sect3-d475e48447"><a name="sect3-d475e48447"><!----></a><h3 class="sect3">Using p:store for writing intermediate results</h3><p class="para">When developing a pipeline, you often want to take a look at what exactly is flowing through it at a certain stage. Inserting a (temporary)
      <code class="code step">p:store</code> step is the most easy way to quickly write some intermediate result to a temporary file on disk for inspection. Since <code class="code step">p:store</code> acts like
      a <code class="code step"><a href="p.identity.html"><span class="link">p:identity</span></a></code> step. nothing happens to the flow in your pipeline.</p><div class="programlisting"><pre class="programlisting">…
&lt;p:store href="file:///my/debug/files/location/stepx.xml"/&gt;
…</pre></div><p class="para">Sometimes you want to keep these temporary storage steps after development. You never know what bugs will pop up and you might need them
      again! XProc has static options that you can use for this:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:option static="true" name="write-debug-documents" select="true()"/&gt;
  
  …

  &lt;p:store use-when="{$write-debug-documents}" href="file:///my/debug/files/location/stepx.xml"/&gt;

  …

&lt;/p:declare-step&gt;</pre></div><p class="para">For the production version you set the <code class="code">write-debug-documents</code> static option to <code class="code">false()</code>. This makes the <code class="code step">p:store</code>
      disappear from the processed code, as if it was never there…</p></div></div><div class="sect2" id="sect2-d475e48473"><a name="sect2-d475e48473"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para"><code class="code step">p:store</code> preserves all document-properties of the document(s) appearing on its <code class="code port">source</code> port.</p></li></ul></div><div class="sect2" id="sect2-d475e48487"><a name="sect2-d475e48487"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0050"><a name="error-XC0050"><!----></a><a href="../error-codes.html#error-XC0050"><span class="link"><code class="code">XC0050</code></span></a></p></td><td><p class="para">It is a dynamic error the file or directory cannot be copied to the specified location.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d475e48511"><a name="sect2-d475e48511"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:store</code> step is for XProc version: <a href="index.html"><span class="link">3.1</span></a>. This is a required step (an XProc 3.1 processor must support this).</p><p class="para">The formal specification for the <code class="code step">p:store</code> step can be found <a href="https://spec.xproc.org/lastcall-2024-08/head/steps/#c.store" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:store</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="Standard_XProc_steps.html"><span class="link">Standard XProc steps</span></a></p></li><li><p class="para"><a href="Interaction_with_the_environment.html"><span class="link">Interaction with the environment</span></a></p></li></ul><p class="para">The <code class="code step">p:store</code> step is also present in version:
                <a href="../3.0/p.store.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>