<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:identity (3.1)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.1/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><p class="para page-banner">This site is work in progress and therefore incomplete yet.</p><div class="sect1" id="sect1-d268e9219"><a name="sect1-d268e9219"><!----></a><h1 class="sect1"><a href="p.hash.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:identity (3.1)&nbsp;<a href="p.namespace-delete.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Copies the source to the result without modifications.</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d268e9232"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d268e9325"><span class="link">Description</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d268e9338"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#sect3-d268e9341"><span class="link">Create a fixed document</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#sect3-d268e9367"><span class="link">Create an explicit anchor points in your pipeline</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#sect3-d268e9393"><span class="link">Produce a processing message</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d268e9407"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d268e9421"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d268e9232"><a name="sect2-d268e9232"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:identity"&gt;
  &lt;input port="source" primary="true" content-types="any" sequence="true"/&gt;
  &lt;output port="result" primary="true" content-types="any" sequence="true"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:identity</code> step makes a verbatim copy of what appears on its <code class="code port">source</code> port to its <code class="code port">result</code>
      port.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Type</p></th><th><p class="para">Port</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">input</code></p></td><td><p class="para"><code class="code">source</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">any</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">The source document(s)</p></td></tr><tr><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">any</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">The resulting document(s). These will be exactly the same as what appeared on the <code class="code port">source</code> port.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d268e9325"><a name="sect2-d268e9325"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:identity</code> step does… nothing. It makes a verbatim copy of all documents appearing on its <code class="code port">source</code> port to its
        <code class="code port">result</code> port. Although it doesn’t do anything, it is actually extremely useful and virtually indispensable. The examples
      below show some use cases.</p></div><div class="sect2" id="sect2-d268e9338"><a name="sect2-d268e9338"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="sect3-d268e9341"><a name="sect3-d268e9341"><!----></a><h3 class="sect3">Create a fixed document</h3><p class="para">There are many situations where you need to create a fixed document in your pipeline. For instance:</p><ul class="itemizedlist"><li><p class="para">On an error catch you want some <code class="tag">&lt;error …&gt;</code> element as result:</p><div class="programlisting"><pre class="programlisting">&lt;p:catch&gt;
  &lt;p:identity&gt;
    &lt;p:with-input&gt;
      &lt;error … /&gt;
    &lt;/p:with-input&gt;
  &lt;/p:identity&gt;
&lt;/p:catch&gt;</pre></div></li><li><p class="para">Some pipelines write their main results to disk and the actual output of the pipeline doesn’t matter. In these cases is often
          useful to produce some kind of report document with relevant information (for instance, when it happened, where the results are,
          etc.):</p><div class="programlisting"><pre class="programlisting">&lt;p:identity&gt;
  &lt;p:with-input&gt;
    &lt;report timestamp="{current-dateTime()}" href-result="{$href-result-location}" … /&gt;
  &lt;/p:with-input&gt;
&lt;/p:identity&gt;</pre></div></li></ul></div><div class="sect3" id="sect3-d268e9367"><a name="sect3-d268e9367"><!----></a><h3 class="sect3">Create an explicit anchor points in your pipeline</h3><p class="para">Because the <code class="code step">p:identity</code> step does’t do anything, it can be used to create “anchor points” in your pipeline. Assume you have
      a complicated pipeline where some version of the document flowing through must be used somewhere else. The <code class="code step">p:identity</code> step can be used to mark such
      a location explicitly. In the following example an anchor point called <code class="code">raw-version</code> is created and, later on, referred to:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;
  
  &lt;!-- Some complicated computations… --&gt;
  
  &lt;p:identity name="raw-version"/&gt;
  
  &lt;!-- Some more complicated computations… --&gt;
  
  &lt;!-- And then a step refers back to the raw version: --&gt;
  &lt;p:insert match="/*" position="first-child"&gt;
    &lt;p:port port="insertion" pipe="@raw-version"/&gt;
  &lt;/p:insert&gt;
  
  &lt;!-- And some more computations… --&gt;
  
&lt;/p:declare-step&gt;</pre></div><p class="para">You could also achieve this by using the <code class="code">name="raw-version"</code> attribute on the last step of the first batch of computations.
      However, by using an explicit <code class="code step">p:identity</code> step it stands out in the code. Also, when the computations change (and they will), you don’t have to
      remember to keep the <code class="code">name="raw-version"</code> attribute on the <span class="emphasis italic">last</span> one always.</p></div><div class="sect3" id="sect3-d268e9393"><a name="sect3-d268e9393"><!----></a><h3 class="sect3">Produce a processing message</h3><p class="para">XProc has a <code class="code">message</code> attribute (or <code class="code">p:message</code> on steps not in the XProc namespace) that results in a message when
      the pipeline runs. Where this message appears depends on how the pipeline is run. Sometimes you want to explicitly produce messages when some
      point in your pipeline is reached. Since <code class="code step">p:identity</code> does’t do anything, it is ideal for this:</p><div class="programlisting"><pre class="programlisting">&lt;p:identity message="We started processing!"/&gt;
&lt;p:identity message="- Input document {$href-input}"/&gt;
&lt;p:identity message="- Processing type {$processing-type}"/&gt;</pre></div></div></div><div class="sect2" id="sect2-d268e9407"><a name="sect2-d268e9407"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para"><code class="code step">p:identity</code> preserves all document-properties of the document(s) appearing on its <code class="code port">source</code> port.</p></li></ul></div><div class="sect2" id="sect2-d268e9421"><a name="sect2-d268e9421"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:identity</code> step is for XProc version: <a href="../index.html"><span class="link">3.1</span></a>. This is a required step (an XProc 3.1 processor must support this).</p><p class="para">The formal specification for the <code class="code step">p:identity</code> step can be found <a href="https://spec.xproc.org/lastcall-2024-08/head/steps/#c.identity" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:identity</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="Standard_XProc_steps.html"><span class="link">Standard XProc steps</span></a></p></li><li><p class="para"><a href="Miscellaneous.html"><span class="link">Miscellaneous</span></a></p></li></ul><p class="para">The <code class="code step">p:identity</code> step is also present in version:
                <a href="../3.0/p.identity.html"><span class="link">3.0</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>