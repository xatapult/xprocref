<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xtlcon="http://www.xtpxlib.nl/ns/container"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="xproc xprocref xml step p:http-request http-request HTTP HTTPS REST"><link href="../css/bootstrap.min.css" rel="stylesheet"><link href="../css/xprocref.css" rel="stylesheet"><script defer src="../js/bootstrap.bundle.min.js"></script><title>&nbsp;p:http-request (3.0)&nbsp;</title><link rel="shortcut icon" href="../images/favicon.ico"></head><body><nav class="navbar navbar-expand-sm bg-secondary navbar-dark "><div class="container-fluid"><a class="navbar-brand" href="../index.html"><img src="../images/logo.png" class="img-fluid" width="18%"></a></div><div class="container-fluid"><ul class="nav justify-content-end nav-pills text-light"><li class="nav-item lead"><a class="nav-link text-light" href="../index.html">home</a></li><li class="nav-item lead"><a class="nav-link text-light" href="../3.1/categories.html">categories</a></li><li class="nav-item dropdown lead"><a class="nav-link dropdown-toggle text-light" data-bs-toggle="dropdown" href="#">info</a><ul class="dropdown-menu"><li class="lead"><a class="dropdown-item" href="../versions.html">Versions</a></li><li class="lead"><a class="dropdown-item" href="../error-codes.html">Error codes</a></li><li class="lead"><a class="dropdown-item" href="../namespaces.html">Namespaces</a></li><li class="lead"><a class="dropdown-item" href="https://xproc.org">XProc</a></li><li class="lead"><a class="dropdown-item" href="https://github.com/xatapult/xprocref">Site GitHub</a></li><li class="lead"><a class="dropdown-item" href="https://github.com/xatapult/xprocref/issues">Site issues</a></li></ul></li><li class="nav-item lead"><a class="nav-link text-light" href="../about.html">about</a></li></ul></div></nav><div class="container pt-5"><div class="sect1" id="sect1-d645e55778"><a name="sect1-d645e55778"><!----></a><h1 class="sect1"><a href="p.hash.html"><span class="link"><img src="../images/previous.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a>&nbsp;p:http-request (3.0)&nbsp;<a href="p.identity.html"><span class="link"><img src="../images/next.png" class="inlinemediaobject next-prev-marker" width="1.5%"></span></a></h1><p class="para">Interact using HTTP (or related protocols).</p><ul class="itemizedlist toc toc-2"><li><p class="para tocentry tocentry-2"><a href="#sect2-d645e55791"><span class="link">Summary</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d645e56129"><span class="link">Description</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#request-header-specification"><span class="link">Specifying request headers</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#request-header-usage"><span class="link">Usage of request headers</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#request-athentication"><span class="link">Request authentication</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#request-parameters"><span class="link">Parameters</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#http-report"><span class="link">The response result and report</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#assert-request-fails"><span class="link">Asserting the request status</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#multipart"><span class="link">Multipart requests</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d645e57755"><span class="link">Examples</span></a></p><ul class="itemizedlist toc toc-3"><li><p class="para tocentry tocentry-3"><a href="#p_http-request-v30-basic-usage"><span class="link">Basic usage</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_http-request-v30-viewing-rh"><span class="link">Viewing the request headers</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_http-request-v30-adding-rh"><span class="link">Adding a request header</span></a></p></li><li><p class="para tocentry tocentry-3"><a href="#p_http-request-v30-viewing-response-h"><span class="link">Viewing the response headers</span></a></p></li></ul></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d645e57950"><span class="link">Additional details</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d645e57996"><span class="link">Errors raised</span></a></p></li><li><p class="para tocentry tocentry-2"><a href="#sect2-d645e58228"><span class="link">Reference information</span></a></p></li></ul><div class="sect2" id="sect2-d645e55791"><a name="sect2-d645e55791"><!----></a><h2 class="sect2">Summary</h2><div class="programlisting step-signature"><pre class="programlisting step-signature">&lt;p:declare-step type="p:http-request"&gt;
  &lt;input port="source" primary="true" content-types="any" sequence="true"/&gt;
  &lt;output port="result" primary="true" content-types="any" sequence="true"/&gt;
  &lt;output port="report" primary="false" content-types="application/json" sequence="true"/&gt;
  &lt;option name="href" as="xs:anyURI" required="true"/&gt;
  &lt;option name="assert" as="xs:string" required="false" select="'.?status-code lt 400'"/&gt;
  &lt;option name="auth" as="map(xs:string, item()+)?" required="false" select="()"/&gt;
  &lt;option name="headers" as="map(xs:string, xs:string)?" required="false" select="()"/&gt;
  &lt;option name="method" as="xs:string?" required="false" select="'GET'"/&gt;
  &lt;option name="parameters" as="map(xs:QName, item()*)?" required="false" select="()"/&gt;
  &lt;option name="serialization" as="map(xs:QName,item()*)?" required="false" select="()"/&gt;
&lt;/p:declare-step&gt;</pre></div><p class="para">The <code class="code step">p:http-request</code> step allows pipelines to interact with resources (for instance websites) over HTTP or related protocols.</p><p class="para table-header">Ports:</p><div class="table nonumber ports-table"><table class="table nonumber ports-table"><thead><tr><th><p class="para">Port</p></th><th><p class="para">Type</p></th><th><p class="para">Primary?</p></th><th><p class="para">Content types</p></th><th><p class="para">Seq?</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">source</code></p></td><td><p class="para"><code class="code">input</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">any</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">Document(s) used in constructing the request body.</p><p class="para">By default, source documents are used for HTTP methods that require a body (for instance <code class="code">POST</code>) only. If the HTTP method
          does not specify a body (for instance <code class="code">GET</code>), any documents appearing on the <code class="code port">source</code> port are ignored. You can
          control this behaviour with the <code class="code">send-body-anyway</code> parameter (see <a href="#request-parameters" class="xref">Parameters</a>).</p></td></tr><tr><td><p class="para"><code class="code">result</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">any</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">The request result document(s). See <a href="#http-report" class="xref">The response result and report</a>.</p></td></tr><tr><td><p class="para"><code class="code">report</code></p></td><td><p class="para"><code class="code">output</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">application/json</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para">A map containing information about the response. See <a href="#http-report" class="xref">The response result and report</a>.</p></td></tr></tbody></table></div><p class="para table-header">Options:</p><div class="table nonumber options-table"><table class="table nonumber options-table"><thead><tr><th><p class="para">Name</p></th><th><p class="para">Type</p></th><th><p class="para">Req?</p></th><th><p class="para">Default</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">href</code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para"><code class="code">true</code></p></td><td><p class="para"><code class="code">&nbsp;</code></p></td><td><p class="para">The URI to use for the request.</p></td></tr><tr><td><p class="para"><code class="code">assert</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">.?status-code lt 400</code></p></td><td><p class="para">Any request can fail, but what exactly failure is depends on the expectations of the receiver. This option takes an XPath expression
          that can inspect the request results. If the result of this expression (executed after a response is received) is <code class="code">false</code>,
          dynamic error <code class="code"><a href="#error-XC0126"><span class="link">XC0126</span></a></code> is raised. See <a href="#assert-request-fails" class="xref">Asserting the request status</a></p></td></tr><tr><td><p class="para"><code class="code">auth</code></p></td><td><p class="para"><code class="code">map(xs:string, item()+)?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">Information for the authentication of the request (in other words: about “logging in”). See <a href="#request-athentication" class="xref">Request authentication</a></p></td></tr><tr><td><p class="para"><code class="code">headers</code></p></td><td><p class="para"><code class="code">map(xs:string, xs:string)?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">A map containing the request headers. Each map key is used as a header name and the value associated is used as the header value.</p><p class="para">There are some special rules regarding the request headers, see <a href="#request-header-specification" class="xref">Specifying request headers</a>.</p><p class="para">Request headers can influence the construction of the request. See <a href="#request-header-usage" class="xref">Usage of request headers</a>.</p></td></tr><tr><td><p class="para"><code class="code">method</code></p></td><td><p class="para"><code class="code">xs:string?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">GET</code></p></td><td><p class="para">The HTTP request method to use for the request. Its value is converted to upper-case.</p><p class="para">Any implementations must support the HTTP methods <code class="code">GET</code> (default), <code class="code">POST</code>, <code class="code">PUT</code>, <code class="code">DELETE</code>,
          and <code class="code">HEAD</code>. Whether any other methods are supported is implementation-defined and therefore dependent on the XProc processor
          used. </p></td></tr><tr><td><p class="para"><code class="code">parameters</code></p></td><td><p class="para"><code class="code">map(xs:QName, item()*)?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">A map with parameters for fine-tuning the construction of the request and/or the handling of the server response. See <a href="#request-parameters" class="xref">Parameters</a>.</p></td></tr><tr><td><p class="para"><code class="code">serialization</code></p></td><td><p class="para"><code class="code">map(xs:QName,item()*)?</code></p></td><td><p class="para"><code class="code">false</code></p></td><td><p class="para"><code class="code">()</code></p></td><td><p class="para">Before the document(s) on the <code class="code port">source</code> port are used, they are first serialized (as if written to disk). This option can
          supply a map with <a href="https://www.w3.org/TR/xslt-xquery-serialization-31/" target="_blank"><span class="link newpage">serialization properties</span></a>,
          controlling this serialization.</p><p class="para">If the source document has a <code class="code property">serialization</code> document-property, the two sets of serialization properties are merged
    (properties in the document-property have precedence).</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d645e56129"><a name="sect2-d645e56129"><!----></a><h2 class="sect2">Description</h2><p class="para">The <code class="code step">p:http-request</code> allows you to send requests to some server and receive their response. You could use this, for instance, to access REST or other
      services on the web. Another use case is to have your pipeline play “web browser”: get the contents of a web page and interpret
      this or fill in some page with a form in the background. Although the step is generic, it will probably be used most (exclusively?) using the
      HTTP(S) protocol, so we’ll concentrate on this. </p><p class="para">The HTTP(s) protocol is rather complex and, to support this, <code class="code step">p:http-request</code> is also complex. As a result of this, the description of <code class="code step">p:http-request</code> is
      long and may appear intimidating to users who are not familiar with the finer details of the HTTP(S) protocol. Luckily, simple interactions,
      like just requesting a single web page, are easy (see <a href="#p_http-request-v30-basic-usage"><span class="link">Basic usage</span></a>) Let’s take it step by step (if there are parts
      you don't understand, chances are you don't need them). The HTTP(S) protocol itself is not explained, if you need more information about this, a
      good place to start would be on <a href="https://en.wikipedia.org/wiki/HTTP" target="_blank"><span class="link newpage">Wikipedia</span></a>.</p><ol class="orderedlist"><li><p class="para">The <code class="code step">p:http-request</code> step first constructs a request:</p><ul class="itemizedlist"><li><p class="para">An HTTP(S) request is always to some URI (like <a href="https://xprocref.org/" target="_blank"><span class="link newpage"><code class="code">https://xprocref.org/</code></span></a>). You must specify this URI using the mandatory <code class="code option">href</code> option.</p></li><li><p class="para">An HTTP(S) request has a method. Usual values are <code class="code">GET</code>, <code class="code">POST</code>, <code class="code">PUT</code>, <code class="code">DELETE</code>, and
                <code class="code">HEAD</code>. You can specify this using the <code class="code option">method</code> option. Its default value is <code class="code">GET</code>.</p></li><li><p class="para">An HTTP(S) request has request headers: name/value pairs that contain additional information for the server. The main source for
              specifying request headers is the <code class="code option">headers</code> option. Some special handling applies, see <a href="#request-header-specification" class="xref">Specifying request headers</a>.</p></li><li><p class="para">Once the request headers are known, some of this information is used by <code class="code step">p:http-request</code> for additional purposes, like determining the
              transfer encoding. See <a href="#request-header-usage" class="xref">Usage of request headers</a> for more information.</p></li><li><p class="para">Any documents that must accompany the request can be supplied on the <code class="code port">source</code> port.</p></li><li><p class="para">Some interactions require authorization (“logging in”). This is usually specified with the <code class="code option">auth</code>
              option. See <a href="#request-athentication" class="xref">Request authentication</a> for more information.</p></li><li><p class="para">It is possible to construct multipart request: requests where multiple documents are sent at once. See <a href="#multipart" class="xref">Multipart requests</a>
              for more information.</p></li><li><p class="para">Further fine-tuning of the request is done using parameters specified in the <code class="code option">parameters</code> option. See <a href="#request-parameters" class="xref">Parameters</a> for more information.</p></li></ul></li><li><p class="para">The request is sent to the server and <code class="code step">p:http-request</code> waits for a response. How long the step will wait before giving up can be specified using
          parameters specified in the <code class="code option">parameters</code> option. See <a href="#request-parameters" class="xref">Parameters</a> for more information. </p></li><li><p class="para">A response is received an interpreted:</p><ul class="itemizedlist"><li><p class="para">Whether a response is considered successful can be specified using the <code class="code option">assert</code> option. If not, error <code class="code"><a href="#error-XC0126"><span class="link">XC0126</span></a></code> is raised. See <a href="#assert-request-fails" class="xref">Asserting the request status</a> for more information.</p></li><li><p class="para">Further fine-tuning of the interpretation of the response is done using parameters specified in the <code class="code option">parameters</code>
              option. See <a href="#request-parameters" class="xref">Parameters</a> for more information.</p></li><li><p class="para">Any documents contained in the response appear on the <code class="code port">result</code> port.</p></li><li><p class="para">Additional information about the response (its response headers, status code, etc.) appears on the <code class="code port">report</code> port, as a
              map. See <a href="#http-report" class="xref">The response result and report</a> for more information.</p></li></ul></li></ol><div class="sect3" id="request-header-specification"><a name="request-header-specification"><!----></a><h3 class="sect3">Specifying request headers</h3><p class="para">An HTTP request has <span class="emphasis italic">request headers</span>: name/value pairs containing additional information for the server. See for
        instance <a href="https://en.wikipedia.org/wiki/List_of_HTTP_header_fields" target="_blank"><span class="link newpage">Wikipedia</span></a> for an overview.</p><p class="para">The main source for <code class="code step">p:http-request</code> for constructing HTTP request headers is its <code class="code option">headers</code> option (see <a href="#p_http-request-v30-viewing-rh"><span class="link">Viewing the request headers</span></a>). </p><p class="para">If a <span class="emphasis italic">single</span> document appears on the <code class="code port">source</code> port and we’re <span class="emphasis italic">not</span> constructing a
        multipart message, special rules apply:</p><ul class="itemizedlist"><li><p class="para">If the (single) document appearing on the <code class="code port">source</code> port:</p><ul class="itemizedlist"><li><p class="para">is an XML, HTML or text document,</p></li><li><p class="para"><span class="emphasis italic">and</span> has a <code class="code option">serialization</code> document-property,</p></li><li><p class="para"><span class="emphasis italic">and</span> this <code class="code option">serialization</code> document-property has an entry called <code class="code">encoding</code>,</p></li></ul><p class="para">a <code class="code">charset</code> is appended to the created <code class="code">content-type</code> header of the HTTP request (for more information about
            this <code class="code">charset</code> parameter, see for instance <a href="https://www.w3.org/International/articles/http-charset/index" target="_blank"><span class="link newpage">here</span></a>).</p></li><li><p class="para">Any document-properties of the (single) document appearing on the <code class="code port">source</code> port that are in the
              <code class="code">http://www.w3.org/ns/xproc-http</code> namespace will be added as request header, using their local name (their name without
            namespace) as the request header name.</p><p class="para">For a request parameter specified both in a document-property and in the map provided to the <code class="code option">headers</code> option, the one
            in the <code class="code option">headers</code> option takes precedence. This comparison is case-<span class="emphasis italic">in</span>sensitive.</p></li></ul><p class="para">When constructing a multipart message, not only the request itself but also its separate documents can have request headers. For more
        information on how this can be specified see <a href="#multipart" class="xref">Multipart requests</a>.</p></div><div class="sect3" id="request-header-usage"><a name="request-header-usage"><!----></a><h3 class="sect3">Usage of request headers</h3><p class="para">Once the request headers are constructed (see <a href="#request-header-specification" class="xref">Specifying request headers</a>), some of these are used for additional
        purposes:</p><ul class="itemizedlist"><li><p class="para">If the value of the <code class="code">content-type</code> request header starts with <code class="code">multipart/</code>, a multipart request is constructed.
            (regardless of the number of documents appearing on the <code class="code port">source</code> port). See <a href="#multipart" class="xref">Multipart requests</a>.</p></li><li><p class="para">For non multipart messages, it is possible to override the media type (<code class="code property">content-type</code> document-property) of the
            body document. If a single document appears on the <code class="code port">source</code> port, we’re not constructing a multipart message and a
              <code class="code">content-type</code> request header is specified, the value of the <code class="code">content-type</code> request header overrides the value of
            the <code class="code property">content-type</code> document-property.</p></li><li><p class="para">If a <code class="code">transfer-encoding</code> request header is present, the request is sent using that particular encoding (for more
            information about transfer encodings see <a href="https://www.rfc-editor.org/rfc/rfc9112#section-6.1" target="_blank"><span class="link newpage">here</span></a>). Examples of values are <code class="code">chunked</code>, <code class="code">compress</code> or <code class="code">gzip</code>.</p></li><li><p class="para">How authorization (“logging in”) is done, is specified using the <code class="code">authorization</code> request header. However, the
            <code class="code step">p:http-request</code> step also has an <code class="code option">auth</code> option for specifying this (see <a href="#request-athentication" class="xref">Request authentication</a>). If this option is
            specified, the <code class="code">authorization</code> request header, if present, is ignored. Instead, the value of the <code class="code">authorization</code>
            request header is determined exclusively by the value of the <code class="code option">auth</code> option.</p></li></ul></div><div class="sect3" id="request-athentication"><a name="request-athentication"><!----></a><h3 class="sect3">Request authentication</h3><p class="para">Information about the authorization of a request (“logging in”) is sent to the server with the <code class="code">authorization</code>
        request header. Experienced users could construct this request header themselves and add it to the step <code class="code option">headers</code> option (or
        use a document-property). However, in most cases, it is easier to pass the authorization information using the <code class="code option">auth</code> option
        and have <code class="code step">p:http-request</code> construct the <code class="code">authorization</code> request header for you. If you use the <code class="code option">auth</code> option, any
          <code class="code">authorization</code> request header passed in some other way is ignored.</p><p class="para">The <code class="code option">auth</code> option contains the credentials (username, password, etc.) of the client and specifies what authentication
        method is used. It must be a map with string (<code class="code">xs:string</code>) type keys. The following standard keys are defined:</p><div class="table nonumber"><table class="table nonumber"><thead><tr><th><p class="para">Key</p></th><th><p class="para">Value data type</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">username</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para"> The username for the request. </p></td></tr><tr><td><p class="para"><code class="code">password</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para"> The password associated with the username. </p></td></tr><tr><td><p class="para"><code class="code">auth-method</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para">Specifies the authentication method to use. Standard values are <code class="code">Basic</code> or <code class="code">Digest</code> (see <a href="https://www.rfc-editor.org/info/rfc2617" target="_blank"><span class="link newpage">here</span></a> for further information). Whether other
                  authorization methods are supported and how to specify these is implementation-defined and therefore dependent on the XProc
                  processor used.</p></td></tr><tr><td><p class="para"><code class="code">send-authorization</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">This controls the “authorization challenge”:</p><ul class="itemizedlist"><li><p class="para">If this key is absent or its value is not <code class="code">true</code>, a first request is sent <span class="emphasis italic">without</span>
                      authorization information. If the server subsequently requests it, the request is resent <span class="emphasis italic">with</span> authorization
                      information. </p></li><li><p class="para">If this key’s value is <code class="code">true</code>, the first request immediately contains the authorization
                      information.</p></li></ul></td></tr></tbody></table></div><p class="para">If an authorization fails, the request is not retried.</p><p class="para">Any other key/value pairs for the <code class="code option">auth</code> option map are implementation-defined and therefore dependent on the XProc
        processor used.</p></div><div class="sect3" id="request-parameters"><a name="request-parameters"><!----></a><h3 class="sect3">Parameters</h3><p class="para">The <code class="code option">parameters</code> option provides information for fine tuning the construction of the request and/or handling the response.
        It must be a map with string (<code class="code">xs:string</code>) type keys. The following standard keys are defined:</p><div class="table nonumber"><table class="table nonumber"><thead><tr><th><p class="para">Key</p></th><th><p class="para">Value data type</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code">override-content-type</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para">The XProc processor must know how to interpret the body of a server response, its data type. Normally this is done by looking at
                  the <code class="code">content-type</code> response header. If this, for instance, is set to <code class="code">application/xml</code>, the response body is
                  interpreted as an XML document. Of course this must succeed, if not, error <code class="code"><a href="#error-XC0030"><span class="link">XC0030</span></a></code> is raised. </p><p class="para">If you specify an <code class="code">override-content-type</code> parameter, its value is used instead of that in the
                    <code class="code">content-type</code> response header.</p><p class="para">The information about the <code class="code">content-type</code> response header that appears on the <code class="code port">report</code> port (see <a href="#http-report" class="xref">The response result and report</a>) is <span class="emphasis italic">not</span> changed and still reflects the actual value received from the server.</p></td></tr><tr><td><p class="para"><code class="code">http-version</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para">Specifies the HTTP version to use for the request. Its default value is implementation-defined and therefore depends on the
                  XProc processor used. Most probably it will be <code class="code">1.1</code>.</p></td></tr><tr><td><p class="para"><code class="code">accept-multipart</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">If this parameter is present and has the value <code class="code">false</code>, any multipart response will result in raising error
                    <code class="code"><a href="#error-XC0125"><span class="link">XC0125</span></a></code>. You can use this to prevent unexpected multipart responses wreak havoc in your pipeline. </p></td></tr><tr><td><p class="para"><code class="code">override-content-encoding</code></p></td><td><p class="para"><code class="code">xs:string</code></p></td><td><p class="para">The XProc processor must know how the encoding of a server response (for instance: <code class="code">utf-8</code>). Normally this is done by
                  looking at the <code class="code">content-encoding</code> response header. If you specify an <code class="code">override-content-encoding</code> parameter,
                  its value is used instead of that in the <code class="code">content-encoding</code> response header.</p><p class="para">The information about the <code class="code">content-encoding</code> response header that appears on the <code class="code port">report</code> port (see <a href="#http-report" class="xref">The response result and report</a>) is <span class="emphasis italic">not</span> changed and still reflects the actual value received from the server.</p></td></tr><tr><td><p class="para"><code class="code">permit-expired-ssl-certificate</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">If this parameter is present and has the value <code class="code">true</code>, <code class="code step">p:http-request</code> does <span class="emphasis italic">not</span> reject a response where
                  the server provides an expired SSL certificate.</p></td></tr><tr><td><p class="para"><code class="code">permit-untrusted-ssl-certificate</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">If this parameter is present and has the value <code class="code">true</code>, <code class="code step">p:http-request</code> does <span class="emphasis italic">not</span> reject a response where
                  the server provides an SSL certificate which is not trusted, for example, because the certificate authority (CA) is unknown.</p></td></tr><tr><td><p class="para"><code class="code">follow-redirect</code></p></td><td><p class="para"><code class="code">xs:integer</code></p></td><td><p class="para">Sometimes a server responds with a <span class="emphasis italic">redirect</span>, meaning something like “please repeat the request to
                  this different URI”. The <code class="code">follow-redirect</code> parameter tells the XProc processor what to do when a redirect is
                  received: </p><ul class="itemizedlist"><li><p class="para">If its value is <code class="code">0</code>, redirects are not followed.</p></li><li><p class="para">If its value is <code class="code">-1</code>, redirects are followed indefinitely.</p></li><li><p class="para">If its value is <span class="emphasis italic">positive</span>, at most this number of subsequent redirects are followed.</p></li></ul><p class="para">The default behaviour, when the <code class="code">follow-redirect</code> parameter is not present, is implementation-defined and therefore
                  dependent on the XProc processor used.</p></td></tr><tr><td><p class="para"><code class="code">timeout</code></p></td><td><p class="para"><code class="code">xs:integer</code></p></td><td><p class="para">Specifies the number of seconds to wait for a response. If no response is received after approximately this number of seconds,
                  the request is terminated and HTTP status <code class="code">408</code> is assumed. </p></td></tr><tr><td><p class="para"><code class="code">fail-on-timeout</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">Sometimes a request results in a timeout. This can either happen by receiving a response with HTTP status <code class="code">408</code> or
                  because the number of seconds specified in the <code class="code">timeout</code> parameter is exceeded. If a <code class="code">fail-on-timeout</code>
                  parameter is present and has the value <code class="code">true</code>, this will result in raising error <code class="code"><a href="#error-XC0078"><span class="link">XC0078</span></a></code>.</p><p class="para">This might be confusing, because XProc also has a <code class="code">[p:]timeout</code> attribute, useable on all steps, that tells the XProc
                  processor how long a step invocation is allowed to take (also specified in seconds). What happens depends on whatever comes
                  first:</p><ul class="itemizedlist"><li><p class="para">If the number of seconds specified in the <code class="code">[p:]timeout</code> attribute is exceeded, error <code class="code">XD0053</code> is
                      raised (a generic timeout error).</p><p class="para">Be careful when you want to use this: whether a processor supports timeouts using the <code class="code">[p:]timeout</code> attribute,
                      and if it does, how precisely and precisely how the execution time of a step is measured, is implementation-defined and
                      therefore dependent on the XProc processor used.</p></li><li><p class="para">If <code class="code">fail-on-timeout</code> is <code class="code">true</code> and a timeout happens, error <code class="code"><a href="#error-XC0078"><span class="link">XC0078</span></a></code> is
                      raised.</p></li></ul></td></tr><tr><td><p class="para"><code class="code">status-only</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">If this parameter is present and its value is <code class="code">true</code>, it indicates that the pipeline author is interested in the
                  response code only. The <code class="code port">result</code> port will not emit anything. The map on the <code class="code port">report</code> port will return an
                  empty map as value of its <code class="code">headers</code> entry.</p></td></tr><tr><td><p class="para"><code class="code">suppress-cookies</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">If this parameter is present and its value is <code class="code">true</code>, no cookies are sent with the request.</p></td></tr><tr><td><p class="para"><code class="code">send-body-anyway</code></p></td><td><p class="para"><code class="code">xs:boolean</code></p></td><td><p class="para">By default, whether a body is sent with the request depends on the HTTP method used (the value of the <code class="code option">method</code>
                  option). For instance, the <code class="code">GET</code> method does not specify a body. When the <code class="code">GET</code> method is used, by default any
                  document(s) on the <code class="code port">source</code> port are ignored.</p><p class="para">When the <code class="code">send-body-anyway</code> parameter is present and its value is <code class="code">true</code>, a request body will always be
                  constructed, even if the HTTP method used does not specify this.</p></td></tr></tbody></table></div><p class="para">Any other key/value pairs for the <code class="code option">parameters</code> option map are implementation-defined and therefore dependent on the XProc
        processor used.</p></div><div class="sect3" id="http-report"><a name="http-report"><!----></a><h3 class="sect3">The response result and report</h3><p class="para">When an answer is received from the server, document(s) in the response body will appear as document(s) on the <code class="code port">result</code> port.
        Each document will be parsed according to its content-type. You can override this behaviour using the <code class="code">override-content-type</code>
        parameter (see <a href="#request-parameters" class="xref">Parameters</a>).</p><p class="para">In case of a multipart response, each part will become a separate document appearing on the <code class="code port">result</code> port. Any response headers
        associated with a specific part are added to the document-properties of the resulting document.</p><p class="para">The <code class="code port">report</code> port always returns a map with the following keys/entries:</p><div class="table nonumber"><table class="table nonumber"><thead><tr><th><p class="para">Key</p></th><th><p class="para">Value data type</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para"><code class="code"><code class="code">status-code</code></code></p></td><td><p class="para"><code class="code">xs:integer</code></p></td><td><p class="para">The HTTP status code for the request, for instance <code class="code">200</code> (success) or <code class="code">404</code> (failure).</p></td></tr><tr><td><p class="para"><code class="code"><code class="code">base-uri</code></code></p></td><td><p class="para"><code class="code">xs:anyURI</code></p></td><td><p class="para">The URI of the request.</p><p class="para">In case of HTTP redirection, this value may be different from the original request URI.</p></td></tr><tr><td><p class="para"><code class="code"><code class="code">headers</code></code></p></td><td><p class="para"><code class="code">map(xs:string, xs:string)</code></p></td><td><p class="para">The HTTP headers returned for the request. Header names are in lower-case. The map may be empty.</p></td></tr></tbody></table></div></div><div class="sect3" id="assert-request-fails"><a name="assert-request-fails"><!----></a><h3 class="sect3">Asserting the request status</h3><p class="para">Any request can fail, but what exactly failure is depends on the expectations of the receiver. The <code class="code">assert</code> option of <code class="code step">p:http-request</code>
        takes an XPath expression that inspects the request results:</p><ul class="itemizedlist"><li><p class="para">It must contain a valid (boolean) XPath expression.</p></li><li><p class="para">This expression will be executed when a response is received.</p></li><li><p class="para">The context item when executing the expression is the map that also appears on the <code class="code port">report</code> port (see <a href="#http-report" class="xref">The response result and report</a>).</p></li><li><p class="para">If the expression evaluates to <code class="code">false</code>, the request is considered failed and error <code class="code"><a href="#error-XC0126"><span class="link">XC0126</span></a></code> is
            raised.</p></li><li><p class="para">If the expression evaluates to <code class="code">true</code>, the request is considered successful. No error is raised.</p></li></ul><p class="para">The default value for the <code class="code option">assert</code> option is <code class="code">.?status-code lt 400</code>. Since the context item is the map on the
          <code class="code port">report</code> port, the dot operator <code class="code">.</code> here refers to this map. The <code class="code">.?status-code</code> part is one of the ways to
        access a map entry (another way to write this is <code class="code">.('status-code')</code>). The referred map entry contains the received (integer) HTTP
        status code. According to its default interpretation, when less than <code class="code">400</code>, the response is considered a success. If it’s
        greater than or equal to <code class="code">400</code>, it is considered a failure and error <code class="code"><a href="#error-XC0126"><span class="link">XC0126</span></a></code> is raised.</p></div><div class="sect3" id="multipart"><a name="multipart"><!----></a><h3 class="sect3">Multipart requests</h3><p class="para">Multipart requests combine one or more sets of data into a single HTTP request. You use this for file uploads and/or transferring data of
        several types in one go. For instance, a web page that allows you to upload several images could use a single multipart request to sent all
        these images to the server. For more information, see for instance <a href="https://en.wikipedia.org/wiki/MIME#Multipart_messages" target="_blank"><span class="link newpage">Wikipedia</span></a> or the <a href="https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html" target="_blank"><span class="link newpage">W3C
          multipart protocol description</span></a>.</p><p class="para">The <code class="code step">p:http-request</code> step constructs a multipart request if one or both of the following conditions is met:</p><ul class="itemizedlist"><li><p class="para">Multiple documents appear on the <code class="code port">source</code> port.</p></li><li><p class="para">The <code class="code">content-type</code> request header (see <a href="#request-header-specification" class="xref">Specifying request headers</a>) starts with <code class="code">multipart/</code>.
          </p></li></ul><p class="para">If no specific <code class="code">content-type</code> request header is specified and the <code class="code port">source</code> receives multiple documents, the content
        type is set to <code class="code">multipart/mixed</code>.</p><p class="para">Multipart request must have a <span class="emphasis italic">boundary marker</span>: a string of characters that is inserted in between the message parts.
        This is critical, because this marker must <span class="emphasis italic">not</span> appear anywhere in the data itself. If it does, the request is considered
        malformed. The boundary marker as used by <code class="code step">p:http-request</code> is constructed as follows:</p><ul class="itemizedlist"><li><p class="para">If the <code class="code">content-type</code> request header contains a boundary parameter, this is used.</p><p class="para">For instance, by setting the <code class="code">content-type</code> to <code class="code">multipart/mixed; boundary=gc0p4Jq0M2Yt08jU534c0p</code>, the boundary
            marker becomes <code class="code">--gc0p4Jq0M2Yt08jU534c0p</code> (the two hyphens in front are prescribed by the protocol).</p></li><li><p class="para">If this is not the case, the boundary marker is implementation-defined and therefore dependent on the XProc processor used.
            Unfortunately, there is no guarantee this boundary marker does not appear in the data itself (which would make the request
            malformed).</p></li></ul><p class="para">When constructing the multipart message, each document on the <code class="code port">source</code> port is serialized (as if written to disk). If a
        document has a <code class="code property">serialization</code> document-property, this is used to determine the serialization format.</p><p class="para">The separate documents in a multipart message can have request headers on their own. Examples of often used headers are <code class="code">id</code>,
          <code class="code">description</code> and <code class="code">disposition</code>. Document-properties of documents on the <code class="code port">source</code> port that are in the
          <code class="code">http://www.w3.org/ns/xproc-http</code> namespace will be used to construct request headers for that particular document, using their
        local name (their name without namespace) as the request header name.</p></div></div><div class="sect2" id="sect2-d645e57755"><a name="sect2-d645e57755"><!----></a><h2 class="sect2">Examples</h2><div class="sect3" id="p_http-request-v30-basic-usage"><a name="p_http-request-v30-basic-usage"><!----></a><h3 class="sect3">Basic usage</h3><p class="para">The following example:</p><ul class="itemizedlist"><li><p class="para">Uses <code class="code step">p:http-request</code> to ask for the home page of the <a href="https://xprocref.org" target="_blank"><span class="link newpage">https://xprocref.org</span></a> website,
          just like a web browser. This fires an HTTPS <code class="code">GET</code> request and waits for the answer.</p><p class="para">Notice that we have to supply a value for the <code class="code port">source</code> port, even if we don’t need it. In this case we simply set it
          to <code class="tag">&lt;p:empty&gt;</code>.</p></li><li><p class="para">We strip the resulting HTML page to just its <code class="tag">&lt;head&gt;</code> (otherwise the result would be too big to display).</p></li></ul><p class="para keep-with-next">Pipeline document:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result" sequence="true"/&gt;

  &lt;p:http-request href="https://xprocref.org"&gt;
    &lt;p:with-input port="source"&gt;
      &lt;p:empty/&gt;
    &lt;/p:with-input&gt;
  &lt;/p:http-request&gt;

  &lt;p:delete match="/h:html/h:body"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para">Resulting HTML fragment:</p><div class="programlisting"><pre class="programlisting">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
   &lt;head&gt;
      &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/&gt;
      &lt;meta name="viewport" content="width=device-width, initial-scale=1"/&gt;
      &lt;meta name="keywords" content="xproc xprocref xml"/&gt;
      &lt;link href="css/bootstrap.min.css" rel="stylesheet"/&gt;
      &lt;link href="css/xprocref.css" rel="stylesheet"/&gt;
      &lt;script defer="" src="js/bootstrap.bundle.min.js"/&gt;
      &lt;title&gt;XProc steps (3.1)&lt;/title&gt;
      &lt;link rel="shortcut icon" href="images/favicon.ico"/&gt;
   &lt;/head&gt;
&lt;/html&gt;</pre></div></div><div class="sect3" id="p_http-request-v30-viewing-rh"><a name="p_http-request-v30-viewing-rh"><!----></a><h3 class="sect3">Viewing the request headers</h3><p class="para">When we want to see what <code class="code step">p:http-request</code> sends as request headers, we need some developer website that tells us what the request headers are. There
      is such a server by <a href="https://beeceptor.com/" target="_blank"><span class="link newpage">Beeceptor</span></a>: send some HTTP request to <a href="https://echo.free.beeceptor.com" target="_blank"><span class="link newpage"><code class="code">https://echo.free.beeceptor.com</code></span></a> and what you receive is a JSON
      message containing information about your request.</p><p class="para">Sending a simple <code class="code">GET</code> request to this URI returns (results vary depending on your IP, operating system, browser, etc.): </p><div class="programlisting"><pre class="programlisting">{
  "method": "GET",
  "protocol": "https",
  "host": "echo.free.beeceptor.com",
  "path": "/",
  "ip": "84.29.5.211:52418",
  "headers": {
    "Host": "echo.free.beeceptor.com",
    "User-Agent": "Apache-HttpClient/4.5.10 (Java/17.0.12)",
    "Accept": "*/*",
    "Accept-Encoding": "gzip,deflate"
  },
  "parsedQueryParams": {}
}</pre></div><p class="para">The following example sends a simple HTTPS request to this server and uses the resulting JSON to construct an XML document showing the HTTP
      request headers sent:</p><ul class="itemizedlist"><li><p class="para">The invocation of <code class="code step">p:http-request</code> just sends a <code class="code">GET</code> request to <a href="https://echo.free.beeceptor.com" target="_blank"><span class="link newpage"><code class="code">https://echo.free.beeceptor.com</code></span></a>. </p></li><li><p class="para">The result is a JSON message that the XProc processor turns into a map. This is now our context item, accessible with the dot operator
            <code class="code">.</code></p></li><li><p class="para">A sub-map in this map called <code class="code">headers</code> contains the header information we’re interested in. We extract this part into
          a variable <code class="code">$headers</code>.</p></li><li><p class="para">The <code class="tag">&lt;p:for-each&gt;</code> loops over all keys in the <code class="code">$headers</code> sub-map.</p></li><li><p class="para">A <code class="code step"><a href="p.identity.html"><span class="link">p:identity</span></a></code> step is used to construct a (single element) XML document, containing the request header name and value:
            <code class="tag">&lt;request-header name="…" value="…"/&gt;</code></p></li><li><p class="para">The <code class="tag">&lt;p:for-each&gt;</code> loop now emits a sequence of documents, one for each request header. A <code class="code step"><a href="p.wrap-sequence.html"><span class="link">p:wrap-sequence</span></a></code> step
          wraps this into an <code class="tag">&lt;http-request-headers&gt;</code> root element to produce a well-formed XML document.</p></li></ul><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:map="http://www.w3.org/2005/xpath-functions/map" xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result" sequence="true"/&gt;

  &lt;p:http-request href="https://echo.free.beeceptor.com"&gt;
    &lt;p:with-input port="source"&gt;
      &lt;p:empty/&gt;
    &lt;/p:with-input&gt;
  &lt;/p:http-request&gt;

  &lt;p:variable name="headers" as="map(*)" select=".?headers"/&gt;
  &lt;p:for-each&gt;
    &lt;p:with-input select="map:keys($headers)"/&gt;
    &lt;p:identity&gt;
      &lt;p:with-input&gt;
        &lt;request-header name="{.}" value="{$headers(.)}"/&gt;
      &lt;/p:with-input&gt;
    &lt;/p:identity&gt;
  &lt;/p:for-each&gt;
  &lt;p:wrap-sequence wrapper="http-request-headers"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;http-request-headers&gt;
   &lt;request-header name="Host" value="echo.free.beeceptor.com"/&gt;
   &lt;request-header name="User-Agent" value="Apache-HttpClient/4.5.10 (Java/17.0.11)"/&gt;
   &lt;request-header name="Accept" value="*/*"/&gt;
   &lt;request-header name="Accept-Encoding" value="gzip,deflate"/&gt;
&lt;/http-request-headers&gt;</pre></div></div><div class="sect3" id="p_http-request-v30-adding-rh"><a name="p_http-request-v30-adding-rh"><!----></a><h3 class="sect3">Adding a request header</h3><p class="para">The <code class="code option">headers</code> option can be used for additional request headers. In this example we add the bogus request header called
            <code class="code">xyz</code> and set it to the value <code class="code">123</code>. The code to view the request headers is identical to that of <a href="#p_http-request-v30-viewing-rh"><span class="link">Viewing the request headers</span></a>:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:map="http://www.w3.org/2005/xpath-functions/map" xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result" sequence="true"/&gt;

  &lt;p:http-request href="https://echo.free.beeceptor.com" headers="map{'xyz': '123' }"&gt;
    &lt;p:with-input port="source"&gt;
      &lt;p:empty/&gt;
    &lt;/p:with-input&gt;
  &lt;/p:http-request&gt;

  &lt;p:variable name="headers" as="map(*)" select=".?headers"/&gt;
  &lt;p:for-each&gt;
    &lt;p:with-input select="map:keys($headers)"/&gt;
    &lt;p:identity&gt;
      &lt;p:with-input&gt;
        &lt;request-header name="{.}" value="{$headers(.)}"/&gt;
      &lt;/p:with-input&gt;
    &lt;/p:identity&gt;
  &lt;/p:for-each&gt;
  &lt;p:wrap-sequence wrapper="http-request-headers"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;http-request-headers&gt;
   &lt;request-header name="Host" value="echo.free.beeceptor.com"/&gt;
   &lt;request-header name="User-Agent" value="Apache-HttpClient/4.5.10 (Java/17.0.11)"/&gt;
   &lt;request-header name="Accept" value="*/*"/&gt;
   &lt;request-header name="Accept-Encoding" value="gzip,deflate"/&gt;
   &lt;request-header name="Xyz" value="123"/&gt;
&lt;/http-request-headers&gt;</pre></div><p class="para">Notice that the name of the request header is capitalized into <code class="code">Xyz</code>. Request header names are case-insensitive, but it is custom
      to capitalize them (start with an upper-case character).</p></div><div class="sect3" id="p_http-request-v30-viewing-response-h"><a name="p_http-request-v30-viewing-response-h"><!----></a><h3 class="sect3">Viewing the response headers</h3><p class="para">Inspecting the response headers can be done by using the map returned on the <code class="code port">report</code> port (see <a href="#http-report" class="xref">The response result and report</a>). The code to view the response headers is almost identical to that of <a href="#p_http-request-v30-viewing-rh"><span class="link">Viewing the request headers</span></a>:</p><div class="programlisting"><pre class="programlisting">&lt;p:declare-step xmlns:map="http://www.w3.org/2005/xpath-functions/map" xmlns:p="http://www.w3.org/ns/xproc" version="3.0"&gt;

  &lt;p:output port="result" sequence="true"/&gt;

  &lt;p:http-request href="https://echo.free.beeceptor.com" name="request"&gt;
    &lt;p:with-input port="source"&gt;
      &lt;p:empty/&gt;
    &lt;/p:with-input&gt;
  &lt;/p:http-request&gt;

  &lt;p:variable name="response-headers" as="map(*)" select=".?headers" pipe="report@request"/&gt;
  &lt;p:for-each&gt;
    &lt;p:with-input select="map:keys($response-headers)"/&gt;
    &lt;p:identity&gt;
      &lt;p:with-input&gt;
        &lt;response-header name="{.}" value="{$response-headers(.)}"/&gt;
      &lt;/p:with-input&gt;
    &lt;/p:identity&gt;
  &lt;/p:for-each&gt;
  &lt;p:wrap-sequence wrapper="http-response-headers"/&gt;

&lt;/p:declare-step&gt;</pre></div><p class="para keep-with-next">Result document:</p><div class="programlisting"><pre class="programlisting">&lt;http-response-headers&gt;
   &lt;response-header name="access-control-allow-origin" value="*"/&gt;
   &lt;response-header name="alt-svc" value="h3=&amp;#34;:443&amp;#34;; ma=2592000"/&gt;
   &lt;response-header name="content-type" value="application/json"/&gt;
   &lt;response-header name="date" value="Tue, 04 Mar 2025 10:02:32 GMT"/&gt;
   &lt;response-header name="vary" value="Accept-Encoding"/&gt;
   &lt;response-header name="transfer-encoding" value="chunked"/&gt;
&lt;/http-response-headers&gt;</pre></div></div></div><div class="sect2" id="sect2-d645e57950"><a name="sect2-d645e57950"><!----></a><h2 class="sect2">Additional details</h2><ul class="itemizedlist"><li><p class="para">A relative value for the <code class="code option">href</code> option is resolved against the base URI of the element on which this option is specified. In
      most cases this will be the static base URI of your pipeline (the path where the XProc source containing the <code class="code step">p:http-request</code> is stored). This is very
      probably not what you want. </p></li><li><p class="para">HTTP request header names are case-insensitive, but keys in maps are not. This means that you could specify the same request header multiple
      times in the <code class="code option">headers</code> option. For instance as <code class="code">Content-Type</code> and <code class="code">content-type</code>. If that happens, error
        <code class="code"><a href="#error-XC0127"><span class="link">XC0127</span></a></code> is raised.</p></li><li><p class="para">When constructing multipart requests (see <a href="#multipart" class="xref">Multipart requests</a>): multiple documents on the <code class="code port">source</code> port combined with a
        <code class="code">content-type</code> header that does <span class="emphasis italic">not</span> start with <code class="code">multipart/</code> raises error <code class="code"><a href="#error-XC0133"><span class="link">XC0133</span></a></code>.</p></li></ul></div><div class="sect2" id="sect2-d645e57996"><a name="sect2-d645e57996"><!----></a><h2 class="sect2">Errors raised</h2><div class="table nonumber error-codes-table"><table class="table nonumber error-codes-table"><thead><tr><th><p class="para">Error code</p></th><th><p class="para">Description</p></th></tr></thead><tbody><tr><td><p class="para" id="error-XC0003"><a name="error-XC0003"><!----></a><a href="../error-codes.html#error-XC0003"><span class="link"><code class="code">XC0003</code></span></a></p></td><td><p class="para">It is a dynamic error if a “<code class="literal">username</code>” or a “<code class="literal">password</code>” key is present without specifying a value for
        the “<code class="literal">auth-method</code>” key, if the requested <code class="literal">auth-method</code> isn't supported, or the authentication challenge
        contains an authentication method that isn't supported.</p></td></tr><tr><td><p class="para" id="error-XC0030"><a name="error-XC0030"><!----></a><a href="../error-codes.html#error-XC0030"><span class="link"><code class="code">XC0030</code></span></a></p></td><td><p class="para">It is a dynamic error if the response body cannot be interpreted as requested (e.g. <code class="literal">application/json</code> to override
          <code class="literal">application/xml</code> content).</p></td></tr><tr><td><p class="para" id="error-XC0078"><a name="error-XC0078"><!----></a><a href="../error-codes.html#error-XC0078"><span class="link"><code class="code">XC0078</code></span></a></p></td><td><p class="para">It is a dynamic error if the value associated with the “<code class="literal">fail-on-timeout</code>” is associated with <code class="code">true()</code> and a
        HTTP status code <code class="literal">408</code> is encountered.</p></td></tr><tr><td><p class="para" id="error-XC0122"><a name="error-XC0122"><!----></a><a href="../error-codes.html#error-XC0122"><span class="link"><code class="code">XC0122</code></span></a></p></td><td><p class="para">It is a dynamic error if the given method is not supported.</p></td></tr><tr><td><p class="para" id="error-XC0123"><a name="error-XC0123"><!----></a><a href="../error-codes.html#error-XC0123"><span class="link"><code class="code">XC0123</code></span></a></p></td><td><p class="para">It is a dynamic error if any key in the “<code class="literal">auth</code>” map is associated with a value that is not an instance of the required
        type.</p></td></tr><tr><td><p class="para" id="error-XC0124"><a name="error-XC0124"><!----></a><a href="../error-codes.html#error-XC0124"><span class="link"><code class="code">XC0124</code></span></a></p></td><td><p class="para">It is a dynamic error if any key in the “parameters” map is associated with a value that is not an instance of the required type.</p></td></tr><tr><td><p class="para" id="error-XC0125"><a name="error-XC0125"><!----></a><a href="../error-codes.html#error-XC0125"><span class="link"><code class="code">XC0125</code></span></a></p></td><td><p class="para">It is a dynamic error if the key “<code class="literal">accept-multipart</code>” as the value <code class="code">false()</code> and a multipart response is
        detected.</p></td></tr><tr><td><p class="para" id="error-XC0126"><a name="error-XC0126"><!----></a><a href="../error-codes.html#error-XC0126"><span class="link"><code class="code">XC0126</code></span></a></p></td><td><p class="para">It is a dynamic error if the XPath expression in <code class="code option">assert</code> evaluates to <code class="code">false</code>.</p></td></tr><tr><td><p class="para" id="error-XC0127"><a name="error-XC0127"><!----></a><a href="../error-codes.html#error-XC0127"><span class="link"><code class="code">XC0127</code></span></a></p></td><td><p class="para">It is a dynamic error if the <code class="code option">headers</code> map contains two keys that are the same when compared in a case-insensitive
        manner.</p></td></tr><tr><td><p class="para" id="error-XC0128"><a name="error-XC0128"><!----></a><a href="../error-codes.html#error-XC0128"><span class="link"><code class="code">XC0128</code></span></a></p></td><td><p class="para">It is a dynamic error if the URI’s scheme is unknown or not supported.</p></td></tr><tr><td><p class="para" id="error-XC0129"><a name="error-XC0129"><!----></a><a href="../error-codes.html#error-XC0129"><span class="link"><code class="code">XC0129</code></span></a></p></td><td><p class="para">It is a dynamic error if the requested HTTP version is not supported.</p></td></tr><tr><td><p class="para" id="error-XC0131"><a name="error-XC0131"><!----></a><a href="../error-codes.html#error-XC0131"><span class="link"><code class="code">XC0131</code></span></a></p></td><td><p class="para">It is a dynamic error if the processor cannot support the requested encoding.</p></td></tr><tr><td><p class="para" id="error-XC0132"><a name="error-XC0132"><!----></a><a href="../error-codes.html#error-XC0132"><span class="link"><code class="code">XC0132</code></span></a></p></td><td><p class="para">It is a dynamic error if the override content encoding cannot be supported.</p></td></tr><tr><td><p class="para" id="error-XC0133"><a name="error-XC0133"><!----></a><a href="../error-codes.html#error-XC0133"><span class="link"><code class="code">XC0133</code></span></a></p></td><td><p class="para">It is a dynamic error if more than one document appears on the <code class="code port">source</code> port and a <code class="literal">content-type</code> header is
        present and the content type specified is not a multipart content type.</p></td></tr><tr><td><p class="para" id="error-XC0203"><a name="error-XC0203"><!----></a><a href="../error-codes.html#error-XC0203"><span class="link"><code class="code">XC0203</code></span></a></p></td><td><p class="para">It is a dynamic error if the specified boundary is not valid (for example, if it begins with two hyphens “--”).</p></td></tr><tr><td><p class="para" id="error-XD0079"><a name="error-XD0079"><!----></a><a href="../error-codes.html#error-XD0079"><span class="link"><code class="code">XD0079</code></span></a></p></td><td><p class="para">It is a dynamic error if a supplied content-type is not a valid media type of the form “<code class="literal"><code class="replaceable italic">type</code>/<code class="replaceable italic">subtype</code>+<code class="replaceable italic">ext</code></code>” or “<code class="literal"><code class="replaceable italic">type</code>/<code class="replaceable italic">subtype</code></code>”.</p></td></tr></tbody></table></div></div><div class="sect2" id="sect2-d645e58228"><a name="sect2-d645e58228"><!----></a><h2 class="sect2">Reference information</h2><p class="para">This description of the <code class="code step">p:http-request</code> step is for XProc version: <a href="index.html"><span class="link">3.0</span></a>. This is a required step (an XProc 3.0 processor must support this).</p><p class="para">The formal specification for the <code class="code step">p:http-request</code> step can be found <a href="https://spec.xproc.org/3.0/steps/#c.http-request" target="_blank"><span class="link newpage">here</span></a>.</p><p class="para">The <code class="code step">p:http-request</code> step is part of categories:</p><ul class="itemizedlist"><li><p class="para"><a href="Standard_XProc_steps.html"><span class="link">Standard XProc steps</span></a></p></li><li><p class="para"><a href="Additional_standards.html"><span class="link">Additional standards</span></a></p></li><li><p class="para"><a href="Interaction_with_the_environment.html"><span class="link">Interaction with the environment</span></a></p></li></ul><p class="para">The <code class="code step">p:http-request</code> step is also present in version:
                <a href="../3.1/p.http-request.html"><span class="link">3.1</span></a>.</p></div></div></div><p>&nbsp;</p></body></html>